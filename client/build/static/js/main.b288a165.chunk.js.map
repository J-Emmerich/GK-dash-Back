{"version":3,"sources":["helpers/history.js","constants/index.js","components/PrivateRoute.js","services/auth.js","services/userContext.js","components/LoginForm.js","components/to-do/Task.js","components/to-do/AddTaskForm.js","components/to-do/CardTitleForm.js","components/to-do/Card.js","services/initialData.js","components/to-do/BoardButtons.js","helpers/prevent-first-card-bug.js","helpers/drag-and-drop.js","services/board.js","components/to-do/Board.js","components/Nav.js","helpers/handle-file-download.js","services/invoice.js","components/invoice/InvoiceForm.js","components/invoice/InvoiceTable.js","components/invoice/InvoiceDashboard.js","services/crm.js","components/crm/CRMTable.js","components/crm/CRMForm.js","components/crm/CRMDashboard.js","services/bugtracker.js","components/bugtracker/BugtrackerTable.js","components/bugtracker/BugtrackerForm.js","components/bugtracker/BugTrackerDashboard.js","components/Home.js","services/settings.js","components/settings/Settings.js","App.js","styleApp.js","components/invoice/pdf-page/Header.js","components/invoice/pdf-page/CustDetails.js","components/invoice/pdf-page/Articles.js","components/invoice/pdf-page/Total.js","components/invoice/pdf-page/DocumentPDF.js","Login.js","index.js"],"names":["createBrowserHistory","apiConstants","ACCESS_TOKEN","LOGGED_USER","SELECTED_PROJECT","PrivateRoute","component","Component","user","rest","token","localStorage","getItem","constants","render","props","to","baseUrl","path","async","username","password","axios","post","data","error","Error","response","msg","UserContext","createContext","UserProvider","children","setUser","useState","selectedProject","setSelectedProject","useEffect","JSON","parse","Provider","value","login","setItem","stringify","currentProject","foundProject","projects","find","project","_id","projectToSave","projectName","projectId","history","push","pathname","logout","removeItem","updateUser","receivedUser","err","console","log","updateWorkingProjectContext","workingProject","Dashboard","styled","div","Container","Form","FormTitle","p","BottomMessage","StyledTextField","TextField","ErrorMessage","InputBlock","LoginForm","submitUser","isLoginForm","setIsLoginForm","errorMessage","setErrorMessage","setUsername","setPassword","useContext","style","backgroundColor","color","placeholder","variant","type","id","margin","onChange","e","target","Button","onClick","preventDefault","services","message","setTimeout","submitLogin","submitRegister","href","isDragDisabled","isDragging","TaskContainer","Task","task","index","removeTask","card","draggableId","is","provided","snapshot","draggableProps","dragHandleProps","ref","innerRef","content","IconButton","AddTaskForm","handleContent","saveTask","newTaskContent","cardId","onSubmit","event","CardTitleForm","saveTitle","newCardTitle","TaskList","isDraggingOver","Title","h3","TitleContainer","Card","tasks","addTask","isInsertingTask","handleTaskChange","handleTaskSubmit","isNewCard","handleCardTitleChange","handleCardTitleSubmit","removeCard","title","fontSize","droppableId","droppableProps","map","name","cards","uuid","taskIds","cardOrder","initialData","listStyle","display","flexWrap","justifyContent","overflow","listItemStyle","width","BoardButtons","addCard","saveToDatabase","isSaved","List","ListItem","button","ListItemIcon","moveCardsInsideBoard","boardData","source","destination","newCardOrder","Array","from","splice","moveTasksInsideCards","cardStart","cardStartIndex","findIndex","cardEnd","cardEndIndex","newTaskIds","newCard","newBoardData","newCardStartTasksIds","newCardEndTasksIds","newCardStart","newCardEnd","headers","Authorization","get","BoardContainer","section","BoardButtonsContainer","Board","setIsSaved","setBoardData","firstCard","setIsInsertingTask","isInsertingCard","setIsInsertingCard","setNewTaskContent","setNewCardTitle","result","preventFirstCardBug","fetchProject","length","targetTask","targetCard","tasksInBoard","filter","cardsInBoard","taskId","newCards","newBoardTasks","sourceTask","some","targetId","cardIndex","newTask","className","defaultNew","onDragEnd","toUpdate","moveOnBoard","direction","ListItemLink","icon","primary","renderLink","React","useMemo","forwardRef","itemProps","activeClassName","ListItemText","Nav","handleFileDownload","responseObject","filename","url","window","URL","createObjectURL","Blob","link","document","createElement","setAttribute","body","appendChild","click","invoice","put","delete","pdf","responseType","dayjs","extend","utc","FlexContainer","form","Header","StyledButton","StyledDate","KeyboardDatePicker","InvoiceForm","isEditing","closeModal","selectedDate","setSelectedDate","control","handleSubmit","reset","setValue","useForm","defaultValues","fields","append","remove","replace","useFieldArray","clientName","invoiceNumber","invoiceDate","orderNumber","invoiceTotal","invoiceSubTotal","invoiceTax","__v","keepDefaultValues","articles","rules","required","field","fieldState","label","helperText","utils","DayJsUtils","autoOk","inputVariant","format","date","isValid","handleDateChange","KeyboardButtonProps","item","articleName","pricePerUnit","quantity","vat","totalPrice","advancedFormat","Table","table","TableHeader","thead","Pagination","InvoiceTable","handleClick","saveToPdf","deleteInvoice","filterInput","setFilterInput","formatDate","columns","accessor","sortBy","row","Cell","cell","original","getTableProps","getTableBodyProps","headerGroups","page","prepareRow","setFilter","canPreviousPage","canNextPage","pageOptions","pageCount","gotoPage","nextPage","previousPage","setPageSize","state","pageIndex","pageSize","useTable","useFilters","useSortBy","usePagination","undefined","headerGroup","getHeaderGroupProps","column","getHeaderProps","getSortByToggleProps","isSorted","isSortedDesc","cells","getCellProps","onMouseEnter","parentNode","onMouseLeave","disabled","defaultValue","Number","Select","MenuItem","modalStyle","position","height","left","top","overflowY","newInvoice","DashboardHeader","Content","InvoiceDashboard","setInvoice","invoiceSaved","setInvoiceSaved","invoiceList","setInvoiceList","setIsEditing","openModal","setOpenModal","invoices","callGetInvoices","resetDashboardState","invoiceReceived","confirm","Modal","open","onClose","filledInvoice","getCustomers","saveCustomer","customer","editCustomer","deleteCustomer","CRMTable","StyledSelect","CRMForm","submitCRMForm","hiddenSelect","setHiddenSelect","modeloContrato","estadoContrato","pets","validate","FormControl","FormHelperText","size","multiline","rows","petName","petType","comment","newCustomer","CRMDashboard","setCustomer","customerSaved","setCustomerSaved","customerList","setCustomerList","callGetCustomers","customers","customerReceived","handlePdf","customerToSave","reportedAt","ModalForm","submitBugForm","bug","descripcion","estadoBug","severidad","comments","contenido","newBug","BugTrackerDashboard","setBug","bugList","setBugList","callGetBugs","bugs","bugReceivedFromTable","BugtrackerTable","BugtrackerForm","bugFormInput","Home","Checkbox","checked","Settings","setProjectName","hasSaved","setHasSaved","setWorkingProject","fetchUpdatedUser","updateWorkingProject","currentProjectToSave","saveWorkingProject","projectUsers","userId","role","saveProject","useStyles","makeStyles","root","textAlign","flexDirection","minHeight","appBar","background","padding","container","flex","drawer","transition","closed","opened","main","footer","FixHeader","App","classes","isOpened","setIsOpened","AppBar","Toolbar","Typography","marginLeft","Drawer","paper","clsx","exact","src","location","origin","alt","CustDetails","Articles","colSpan","article","articleId","Total","DocumentPDF","match","params","then","client","Login","rootElement","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.b288a165.chunk.js","sourcesContent":["import { createBrowserHistory } from \"history\";\r\n\r\nexport default createBrowserHistory();\r\n","const apiConstants = {\r\n  ACCESS_TOKEN: \"ACCESS_TOKEN\",\r\n  LOGGED_USER: \"LOGGED_USER\",\r\n  SELECTED_PROJECT: \"SELECTED_PROJECT\"\r\n};\r\n\r\nexport default apiConstants;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport constants from \"../constants/index\";\r\n\r\nconst PrivateRoute = ({ component: Component, user, ...rest }) => {\r\n  const token = localStorage.getItem(constants.ACCESS_TOKEN);\r\n  return (\r\n    // Show the component only when the user is logged in\r\n    // Otherwise, redirect the user to /signin page\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        token ? <Component {...props} token={token} /> : <Redirect to=\"/\" />\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"https://gordianknot.xyz/api\";\r\nconst path = \"auth\";\r\n\r\nconst registerNewUser = async (username, password) => {\r\n  try {\r\n    const user = await axios.post(`${baseUrl}/${path}/register`, {\r\n      username,\r\n      password\r\n    });\r\n\r\n    return user.data;\r\n  } catch (error) {\r\n    throw new Error(error.response.data.msg);\r\n  }\r\n};\r\n\r\nconst loginNewUser = async (username, password) => {\r\n  try {\r\n    const user = await axios.post(`${baseUrl}/${path}/login`, {\r\n      username,\r\n      password\r\n    });\r\n    return user.data;\r\n  } catch (error) {\r\n    throw new Error(error.response.data.msg);\r\n  }\r\n};\r\n\r\nexport default { loginNewUser, registerNewUser };\r\n","import React, { useState, createContext, useEffect } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport constants from \"../constants/index\";\r\nimport history from \"../helpers/history\";\r\n\r\nconst UserContext = createContext();\r\n\r\nconst UserProvider = ({ children }) => {\r\n  const [user, setUser] = useState({});\r\n  const [selectedProject, setSelectedProject] = useState()\r\n  useEffect(() => {\r\n    if (localStorage.getItem(constants.LOGGED_USER)) {\r\n      setUser(JSON.parse(localStorage.getItem(constants.LOGGED_USER)));\r\n      if(localStorage.getItem(constants.SELECTED_PROJECT)){\r\n        setSelectedProject(JSON.parse(localStorage.getItem(constants.SELECTED_PROJECT)))\r\n      }  \r\n    }\r\n\r\n  }, []);\r\n  const login = (response) => {\r\n    localStorage.setItem(constants.ACCESS_TOKEN, response.token);\r\n    localStorage.setItem(constants.LOGGED_USER, JSON.stringify(response.user));\r\n    setUser(response.user);\r\n   if(response.user.currentProject && response.user.currentProject !== \"\"){\r\n     const foundProject = response.user.projects.find(project => {\r\n      return project._id === response.user.currentProject;\r\n     })\r\n\r\n     const projectToSave = {projectName: foundProject.projectName, projectId: foundProject._id}\r\n     setSelectedProject(projectToSave)\r\n   }\r\n   \r\n    history.push({ pathname: \"/app\" });\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(constants.ACCESS_TOKEN);\r\n    localStorage.removeItem(constants.LOGGED_USER);\r\n   \r\n\r\n    setUser({});\r\n    setSelectedProject({projectId: \"\", projectName: \"\"})\r\n    history.push({ pathname: \"/\" });\r\n  };\r\n\r\n  const updateUser = (receivedUser) => {\r\n    try{\r\nsetUser(receivedUser);\r\n    } catch (err){\r\n      console.log(err)\r\n    }\r\n  }\r\nconst updateWorkingProjectContext = (workingProject) => {\r\n  const foundProject = user.projects.find(project => project.projectName === workingProject);\r\n  const projectToSave = {projectName: foundProject.projectName, projectId: foundProject._id}\r\n  \r\n  setSelectedProject(projectToSave)\r\n}\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user, login, logout, updateUser, selectedProject, updateWorkingProjectContext }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport { UserProvider, UserContext };\r\n","import React, { useState, useContext } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport services from \"../services/auth\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { UserContext } from \"../services/userContext\";\r\nimport constants from \"../constants/index\";\r\nimport {Redirect} from \"react-router-dom\"\r\n\r\nconst Dashboard = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n`;\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-flow: column wrap;\r\n  justify-content: center;\r\n  flex-grow: 1;\r\n`;\r\n\r\nconst Form = styled.div`\r\n  margin: 40px auto;\r\n  font-family: \"Segoe UI\", sans-serif;\r\n  padding: 25px 28px;\r\n  border-radius: 4px;\r\n  border: 1px solid #302d2d;\r\n  display: flex;\r\n  flex-flow: column wrap;\r\n`;\r\nconst FormTitle = styled.p`\r\n  text-align: center;\r\n  font-size: 28px;\r\n  margin-bottom: 20px;\r\n  font-weight: 400;\r\n`;\r\n\r\nconst BottomMessage = styled.p`\r\n  text-align: center;\r\n  > a {\r\n    color: #fc86aa;\r\n  }\r\n`;\r\nconst StyledTextField = styled(TextField)`\r\n  & input,\r\n  textarea,\r\n  select,\r\n  option {\r\n    padding: 20px;\r\n  }\r\n`;\r\nconst ErrorMessage = styled.div`\r\n  flex-grow: 0;\r\n  text-align: center;\r\n  color: white;\r\n  font-size: 14px;\r\n  padding: 5px;\r\n  width: 90%;\r\n`;\r\nconst InputBlock = styled.div`\r\n  display: block;\r\n  margin-bottom: 20px;\r\n`;\r\nconst LoginForm = ({ submitUser }) => {\r\n  const [isLoginForm, setIsLoginForm] = useState(true);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const { login } = useContext(UserContext);\r\n  const token = localStorage.getItem(constants.ACCESS_TOKEN);\r\n\r\n  const submitLogin = async (e, username, password) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const user = await services.loginNewUser(username, password);\r\n      login(user);\r\n    } catch (err) {\r\n      setErrorMessage(err.message);\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 2000);\r\n    }\r\n  };\r\n  const submitRegister = async (e, username, password) => {\r\n    try {\r\n      e.preventDefault();\r\n      const user = await services.registerNewUser(username, password);\r\n      login(user);\r\n    } catch (err) {\r\n      setErrorMessage(err.message);\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 4000);\r\n    }\r\n  };\r\n\r\n  return !token? \r\n  (\r\n\r\n<Dashboard>\r\n\r\n      <header style={{ backgroundColor: \"#00022E\", color: \"#FC86AA\" }}>\r\n        <FormTitle>Gordian Knot</FormTitle>\r\n      </header>\r\n\r\n      <Container>\r\n        <Form>\r\n          <FormTitle>{isLoginForm ? \"Login\" : \"Registro\"}</FormTitle>\r\n          <form>\r\n            <InputBlock>\r\n              <StyledTextField\r\n                placeholder=\"Nombre de usuario\"\r\n                variant=\"outlined\"\r\n                type=\"text\"\r\n                id=\"username\"\r\n                margin=\"dense\"\r\n                onChange={(e) => setUsername(e.target.value)}\r\n                value={username}\r\n              />\r\n            </InputBlock>\r\n            <InputBlock>\r\n              <StyledTextField\r\n                placeholder=\"Contraseña\"\r\n                type=\"password\"\r\n                variant=\"outlined\"\r\n                id=\"password\"\r\n                margin=\"dense\"\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                value={password}\r\n              />\r\n            </InputBlock>\r\n          </form>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={\r\n              isLoginForm\r\n                ? (e) => submitLogin(e, username, password)\r\n                : (e) => submitRegister(e, username, password)\r\n            }\r\n          >\r\n            Enviar\r\n          </Button>\r\n\r\n          <BottomMessage>\r\n            Quieres&nbsp;\r\n            <Button\r\n              style={{ color: \"#FC86AA\" }}\r\n              onClick={() => setIsLoginForm(!isLoginForm)}\r\n            >\r\n              {isLoginForm ? \"te registrar\" : \"hacer login\"}\r\n            </Button>\r\n            &nbsp;?\r\n          </BottomMessage>\r\n        </Form>\r\n        {errorMessage ? (\r\n          <ErrorMessage>\r\n            <p>{errorMessage}</p>\r\n          </ErrorMessage>\r\n        ) : (\r\n          <ErrorMessage>&nbsp;</ErrorMessage>\r\n        )}\r\n      </Container>\r\n      <footer style={{ backgroundColor: \"#00022E\", color: \"#FC86AA\" }}>\r\n        <BottomMessage>\r\n          Desarollado por{\" \"}\r\n          <a href=\"https://linkedin.com/in/joao-emmerich\">João Emmerich</a>\r\n        </BottomMessage>\r\n      </footer>\r\n    </Dashboard>) : <Redirect to=\"/app\" />\r\n  \r\n};\r\n\r\nexport default LoginForm;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Draggable } from \"react-beautiful-dnd\";\r\nimport BackspaceIcon from \"@material-ui/icons/Backspace\";\r\nimport { IconButton } from \"@material-ui/core\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-radius: 2px;\r\n  padding: 8px;\r\n  margin-bottom: 8px;\r\n  transition: background-color 1.2s ease;\r\n  background-color: ${(props) =>\r\n    props.isDragDisabled\r\n      ? \"lightgrey\"\r\n      : props.isDragging\r\n      ? \"white\"\r\n      : \"lightgrey\"};\r\n`;\r\nconst TaskContainer = styled.div`\r\n  padding-left: 10px;\r\n`;\r\n\r\nconst Task = ({ task, index, removeTask, card }) => {\r\n  const isDragDisabled = task.id === \"task-1\";\r\n  return (\r\n    <Draggable\r\n      draggableId={task.id}\r\n      index={index}\r\n      isDragDisabled={isDragDisabled}\r\n      is\r\n    >\r\n      {(provided, snapshot) => {\r\n        return (\r\n          <Container\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n            ref={provided.innerRef}\r\n            isDragging={snapshot.isDragging}\r\n            isDragDisabled={isDragDisabled}\r\n          >\r\n            <TaskContainer>{task.content}</TaskContainer>\r\n            <IconButton onClick={() => removeTask(task, card)}>\r\n              <BackspaceIcon />\r\n            </IconButton>\r\n          </Container>\r\n        );\r\n      }}\r\n    </Draggable>\r\n  );\r\n};\r\n\r\nexport default Task;\r\n","import React from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nconst AddTaskForm = ({ handleContent, saveTask, newTaskContent, cardId }) => {\r\n  return (\r\n    <form onSubmit={(event) => saveTask(event, cardId)}>\r\n      <TextField\r\n        variant=\"outlined\"\r\n        type=\"text\"\r\n        value={newTaskContent}\r\n        onChange={handleContent}\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default AddTaskForm;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nconst CardTitleForm = ({ handleContent, saveTitle, newCardTitle, cardId }) => {\r\n  return (\r\n    <form onSubmit={(event) => saveTitle(event, cardId)}>\r\n      <TextField\r\n        variant=\"outlined\"\r\n        type=\"text\"\r\n        value={newCardTitle}\r\n        onChange={handleContent}\r\n      />\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CardTitleForm;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Task from \"./Task\";\r\nimport { Draggable, Droppable } from \"react-beautiful-dnd\";\r\nimport AddTaskForm from \"./AddTaskForm\";\r\nimport CardTitleForm from \"./CardTitleForm\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport RemoveCircleOutlineIcon from \"@material-ui/icons/RemoveCircleOutline\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nconst Container = styled.div`\r\n  margin: 8px;\r\n  border: 1px solid lightgrey;\r\n  border-radius: 2px;\r\n  width: 250px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #efefef;\r\n`;\r\n\r\nconst TaskList = styled.div`\r\n  padding: 8px;\r\n  transition: background-color 0.5s ease;\r\n  background-color: ${(props) =>\r\n    props.isDraggingOver ? \"#F1769A\" : \"inherit\"};\r\n  flex-grow: 1;\r\n  min-height: 100px;\r\n`;\r\n\r\nconst Title = styled.h3`\r\n  padding: 8px;\r\n  text-align: center;\r\n`;\r\nconst TitleContainer = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Card = ({\r\n  card,\r\n  tasks,\r\n  index,\r\n  addTask,\r\n  isInsertingTask,\r\n  handleTaskChange,\r\n  handleTaskSubmit,\r\n  newTaskContent,\r\n  isNewCard,\r\n  newCardTitle,\r\n  handleCardTitleChange,\r\n  handleCardTitleSubmit,\r\n  removeTask,\r\n  removeCard\r\n}) => {\r\n  const isDragDisabled = isNewCard === true;\r\n  return (\r\n    // The index is the position of the draggable inside of the droppable\r\n    <Draggable\r\n      draggableId={card.id}\r\n      index={index}\r\n      isDragDisabled={isDragDisabled}\r\n    >\r\n      {(provided) => (\r\n        <Container {...provided.draggableProps} ref={provided.innerRef}>\r\n          <TitleContainer>\r\n            <Title {...provided.dragHandleProps}>\r\n              {isNewCard ? (\r\n                <CardTitleForm\r\n                  newCardTitle={newCardTitle}\r\n                  handleContent={handleCardTitleChange}\r\n                  saveTitle={handleCardTitleSubmit}\r\n                  cardId={card.id}\r\n                />\r\n              ) : (\r\n                card.title\r\n              )}\r\n            </Title>\r\n            <IconButton onClick={() => removeCard(card)}>\r\n              <RemoveCircleOutlineIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </TitleContainer>\r\n          <hr />\r\n          <Droppable droppableId={card.id} type=\"task\">\r\n            {(provided, snapshot) => (\r\n              <TaskList\r\n                isDraggingOver={snapshot.isDraggingOver}\r\n                ref={provided.innerRef}\r\n                {...provided.droppableProps}\r\n              >\r\n                {tasks.map((task, index) => {\r\n                  return (\r\n                    <Task\r\n                      key={task.id}\r\n                      task={task}\r\n                      index={index}\r\n                      removeTask={removeTask}\r\n                      card={card}\r\n                    />\r\n                  );\r\n                })}\r\n                {provided.placeholder}\r\n              </TaskList>\r\n            )}\r\n          </Droppable>\r\n          {isInsertingTask ? (\r\n            <AddTaskForm\r\n              newTaskContent={newTaskContent}\r\n              handleContent={handleTaskChange}\r\n              saveTask={handleTaskSubmit}\r\n              cardId={card.id}\r\n            />\r\n          ) : isNewCard ? null : (\r\n            <Button variant=\"contained\" color=\"primary\" onClick={addTask}>\r\n              Añadir tarea\r\n            </Button>\r\n          )}\r\n        </Container>\r\n      )}\r\n    </Draggable>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import { v4 as uuid } from \"uuid\";\r\n\r\nconst project = {\r\n  name: \"first-project\",\r\n  tasks: [],\r\n  cards: [\r\n    {\r\n      name: \"\",\r\n      id: uuid(),\r\n      title: \"New Title\",\r\n      isNewCard: true,\r\n      isInsertingTask: false,\r\n      taskIds: []\r\n    }\r\n  ],\r\n  // Facilitate reordering columns\r\n  cardOrder: [],\r\n  initialData: true\r\n};\r\nproject.cardOrder = [project.cards[0].id];\r\n\r\nexport default project;\r\n","import React from \"react\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport PostAddOutlinedIcon from \"@material-ui/icons/PostAddOutlined\";\r\nimport SaveOutlinedIcon from \"@material-ui/icons/SaveOutlined\";\r\n\r\n// Why not styled components?\r\nconst listStyle = {\r\n  display: \"flex\",\r\n  flexWrap: \"wrap\",\r\n  justifyContent: \"center\",\r\n  overflow: \"hidden\"\r\n};\r\nconst listItemStyle = {\r\n  width: \"50px\"\r\n};\r\nconst BoardButtons = ({ addCard, saveToDatabase, isSaved }) => {\r\n  return (\r\n    <List style={listStyle}>\r\n      <ListItem style={listItemStyle} onClick={addCard} button={true}>\r\n        <ListItemIcon>\r\n          <PostAddOutlinedIcon fontSize=\"medium\" />\r\n        </ListItemIcon>\r\n      </ListItem>\r\n      <ListItem style={listItemStyle} onClick={saveToDatabase} button={true}>\r\n        <ListItemIcon>\r\n          <SaveOutlinedIcon\r\n            fontSize=\"medium\"\r\n            color={isSaved ? \"disabled\" : \"action\"}\r\n          />\r\n        </ListItemIcon>\r\n      </ListItem>\r\n    </List>\r\n  );\r\n};\r\n\r\nexport default BoardButtons;\r\n","export const preventFirstCardBug = (boardData) => {\r\n  return boardData.initialData === true ? true : false;\r\n};\r\n","export const moveOnBoard = (data, boardData) => {\r\n  const { destination, source, draggableId, type } = data;\r\n  // If the user cancel with escape or error, do nothing\r\n  if (!destination) {\r\n    return;\r\n  }\r\n  // If the user take the task out of the card, do nothing\r\n  if (\r\n    destination.droppableId === source.droppableId &&\r\n    destination.index === source.index\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  // Moving cards inside Board :::\r\n  if (type === \"card\") {\r\n    const newBoardData = moveCardsInsideBoard(\r\n      boardData,\r\n      source,\r\n      destination,\r\n      draggableId\r\n    );\r\n    return newBoardData;\r\n  }\r\n  // Moving tasks inside Cards:::\r\n  if (type === \"task\") {\r\n    const newBoardData = moveTasksInsideCards(\r\n      boardData,\r\n      source,\r\n      destination,\r\n      draggableId\r\n    );\r\n\r\n    return newBoardData;\r\n  }\r\n};\r\n\r\nconst moveCardsInsideBoard = (boardData, source, destination, draggableId) => {\r\n  const newCardOrder = Array.from(boardData.cardOrder);\r\n  newCardOrder.splice(source.index, 1);\r\n  newCardOrder.splice(destination.index, 0, draggableId);\r\n\r\n  const newBoardData = {\r\n    ...boardData,\r\n    cardOrder: newCardOrder\r\n  };\r\n\r\n  return newBoardData;\r\n};\r\n\r\nconst moveTasksInsideCards = (boardData, source, destination, draggableId) => {\r\n  // Define the cards where to splice later\r\n  const cardStart = boardData.cards.find(\r\n    (card) => card.id === source.droppableId\r\n  );\r\n  const cardStartIndex = boardData.cards.findIndex(\r\n    (card) => card.id === source.droppableId\r\n  );\r\n\r\n  const cardEnd = boardData.cards.find(\r\n    (card) => card.id === destination.droppableId\r\n  );\r\n  const cardEndIndex = boardData.cards.findIndex(\r\n    (card) => card.id === destination.droppableId\r\n  );\r\n\r\n  //If the task doesn't change from columns\r\n  if (cardStart === cardEnd) {\r\n    //Don't mutate the state, create new array\r\n    const newTaskIds = Array.from(cardStart.taskIds);\r\n    newTaskIds.splice(source.index, 1);\r\n    newTaskIds.splice(destination.index, 0, draggableId);\r\n\r\n    const newCard = {\r\n      ...cardStart,\r\n      taskIds: newTaskIds\r\n    };\r\n\r\n    const newBoardData = {\r\n      ...boardData,\r\n      cards: [...boardData.cards]\r\n    };\r\n    newBoardData.cards[cardStartIndex] = newCard;\r\n    return newBoardData;\r\n\r\n    // -------------------------- //\r\n  } else {\r\n    //Don't mutate arrays.\r\n    const newCardStartTasksIds = Array.from(cardStart.taskIds);\r\n    const newCardEndTasksIds = Array.from(cardEnd.taskIds);\r\n\r\n    newCardStartTasksIds.splice(source.index, 1);\r\n    newCardEndTasksIds.splice(destination.index, 0, draggableId);\r\n\r\n    const newCardStart = {\r\n      ...cardStart,\r\n      taskIds: newCardStartTasksIds\r\n    };\r\n\r\n    const newCardEnd = {\r\n      ...cardEnd,\r\n      taskIds: newCardEndTasksIds\r\n    };\r\n\r\n    const newBoardData = {\r\n      ...boardData,\r\n      cards: [...boardData.cards]\r\n    };\r\n    newBoardData.cards[cardStartIndex] = newCardStart;\r\n    newBoardData.cards[cardEndIndex] = newCardEnd;\r\n\r\n    return newBoardData;\r\n  }\r\n};\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"https://gordianknot.xyz/api\";\r\nconst path = \"dashboard\";\r\n\r\nconst saveBoardToDatabase = async (token, boardData) => {\r\n  try {\r\n    const response = await axios.post(`${baseUrl}/${path}`, boardData, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n    return response.data;\r\n  } catch (err) {\r\n    console.log(\"Error sending data\");\r\n  }\r\n};\r\n\r\nconst getProject = async (token) => {\r\n  try {\r\n    const response = await axios.get(`${baseUrl}/${path}`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n    return response.data;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\n// Use only for debugging, deletes all database\r\nconst __cleanAndLog = async () => {\r\n  await axios.delete(`${baseUrl}/${path}`);\r\n};\r\n\r\nexport default { saveBoardToDatabase, getProject, __cleanAndLog };\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Card from \"./Card\";\r\nimport firstCard from \"../../services/initialData\";\r\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\r\nimport styled from \"styled-components\";\r\nimport BoardButtons from \"./BoardButtons\";\r\nimport { preventFirstCardBug } from \"../../helpers/prevent-first-card-bug\";\r\nimport { moveOnBoard } from \"../../helpers/drag-and-drop\";\r\nimport services from \"../../services/board\";\r\nimport { v4 as uuid } from \"uuid\";\r\n\r\nconst BoardContainer = styled.section`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst BoardButtonsContainer = styled.div`\r\n  border: 1px solid #fc86aa;\r\n  margin: 20px;\r\n`;\r\n\r\nconst Board = ({ token }) => {\r\n  const [isSaved, setIsSaved] = useState(true);\r\n  const [boardData, setBoardData] = useState(firstCard);\r\n  const [isInsertingTask, setIsInsertingTask] = useState(false);\r\n  const [isInsertingCard, setIsInsertingCard] = useState(false);\r\n  const [newTaskContent, setNewTaskContent] = useState(\"\");\r\n  const [newCardTitle, setNewCardTitle] = useState(\"New Card\");\r\n  useEffect(() => {\r\n    const result = preventFirstCardBug(boardData);\r\n    if (result) setIsInsertingCard(true);\r\n  }, []);\r\n  useEffect(() => {\r\n    if (boardData.initialData === true) {\r\n      async function fetchProject() {\r\n        const data = await services.getProject(token);\r\n        \r\n        if (data && data.length > 0) {\r\n\r\n          setBoardData(data[0]);\r\n          setIsInsertingCard(false);\r\n        }\r\n      }\r\n      fetchProject();\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setIsSaved(false);\r\n  }, [boardData]);\r\n\r\n  const saveToDatabase = async () => {\r\n    const data = await services.saveBoardToDatabase(token, boardData);\r\n    setBoardData(data);\r\n    setIsSaved(true);\r\n  };\r\n\r\n  const onDragEnd = (result) => {\r\n    const toUpdate = moveOnBoard(result, boardData);\r\n    if (toUpdate) {\r\n      setBoardData(toUpdate);\r\n    }\r\n  };\r\n\r\n  const addCard = () => {\r\n    if (isInsertingCard) {\r\n      return;\r\n    } else {\r\n      setIsInsertingCard(!isInsertingCard);\r\n      const defaultNew = {\r\n        name: \"\",\r\n        id: uuid(),\r\n        title: newCardTitle,\r\n        isNewCard: true,\r\n        isInsertingTask: false,\r\n        taskIds: []\r\n      };\r\n\r\n      const newCardOrder = [...boardData.cardOrder, defaultNew.id];\r\n\r\n      const newBoardData = {\r\n        ...boardData,\r\n        cards: [...boardData.cards],\r\n        cardOrder: newCardOrder\r\n      };\r\n      newBoardData.cards.push(defaultNew);\r\n      setBoardData(newBoardData);\r\n    }\r\n  };\r\n\r\n  const addTask = (card) => {\r\n    // If it's setting a new task in a card you can't set a new one\r\n    if (isInsertingTask) {\r\n      return;\r\n    } else {\r\n      setIsInsertingTask(!isInsertingTask);\r\n\r\n      const newCard = { ...card, isInsertingTask: true };\r\n      const newBoardData = {\r\n        ...boardData,\r\n        cards: [...boardData.cards]\r\n      };\r\n      const index = newBoardData.cards.findIndex(\r\n        (card) => card.id === newCard.id\r\n      );\r\n      newBoardData.cards[index] = newCard;\r\n      setBoardData(newBoardData);\r\n    }\r\n  };\r\n\r\n  const removeTask = (targetTask, targetCard) => {\r\n    let tasksInBoard = Array.from(boardData.tasks);\r\n    tasksInBoard = tasksInBoard.filter((task) => task.id !== targetTask.id);\r\n    let cardsInBoard = Array.from(boardData.cards);\r\n    let newCard = cardsInBoard.find((card) => card.id === targetCard.id);\r\n    newCard.taskIds = newCard.taskIds.filter(\r\n      (taskId) => taskId !== targetTask.id\r\n    );\r\n    cardsInBoard = cardsInBoard.map((card) => {\r\n      return card.id === newCard.id ? newCard : card;\r\n    });\r\n\r\n    const newBoardData = { ...boardData };\r\n    newBoardData.tasks = tasksInBoard;\r\n    newBoardData.cards = cardsInBoard;\r\n\r\n    setBoardData(newBoardData);\r\n  };\r\n\r\n  const removeCard = (targetCard) => {\r\n    let newCardOrder = [...boardData.cardOrder];\r\n    let newCards = [...boardData.cards];\r\n    let newBoardTasks = [...boardData.tasks];\r\n\r\n    // Makes an array that has all id's that are not found in the deleted card\r\n    newBoardTasks = newBoardTasks.filter(\r\n      (sourceTask) =>\r\n        !targetCard.taskIds.some((targetId) => sourceTask.id === targetId)\r\n    );\r\n\r\n    newCardOrder = newCardOrder.filter((id) => id !== targetCard.id);\r\n    newCards = newCards.filter((card) => card.id !== targetCard.id);\r\n\r\n    const newBoardData = { ...boardData };\r\n    newBoardData.tasks = newBoardTasks;\r\n    newBoardData.cardOrder = newCardOrder;\r\n    newBoardData.cards = newCards;\r\n    setBoardData(newBoardData);\r\n  };\r\n\r\n  const handleTaskChange = (event) => {\r\n    setNewTaskContent(event.target.value);\r\n  };\r\n  const handleCardTitleChange = (event) => {\r\n    setNewCardTitle(event.target.value);\r\n  };\r\n\r\n  const handleTaskSubmit = (event, cardId) => {\r\n    event.preventDefault();\r\n    const card = boardData.cards.find((card) => card.id === cardId);\r\n    const cardIndex = boardData.cards.findIndex((card) => card.id === cardId);\r\n    const newTask = { id: uuid(), content: newTaskContent };\r\n    card.taskIds.push(newTask.id);\r\n\r\n    card.isInsertingTask = false;\r\n    const newBoardData = { ...boardData };\r\n    newBoardData.tasks.push(newTask);\r\n    newBoardData.cards[cardIndex] = card;\r\n    newBoardData.initialData = false;\r\n    setBoardData(newBoardData);\r\n\r\n    setNewTaskContent(\"\");\r\n    setIsInsertingTask(!isInsertingTask);\r\n  };\r\n\r\n  const handleCardTitleSubmit = (event, cardId) => {\r\n    event.preventDefault();\r\n\r\n    const card = boardData.cards.find((card) => card.id === cardId);\r\n\r\n    const cardIndex = boardData.cards.findIndex((card) => card.id === cardId);\r\n    card.title = newCardTitle;\r\n    card.isNewCard = false;\r\n    const newBoardData = {\r\n      ...boardData,\r\n      tasks: [...boardData.tasks],\r\n      cards: [...boardData.cards]\r\n    };\r\n    newBoardData.cards[cardIndex] = card;\r\n    newBoardData.initialData = false;\r\n    setBoardData(newBoardData);\r\n    setIsInsertingCard(false);\r\n    setNewCardTitle(\"New Card\");\r\n  };\r\n\r\n  return (\r\n    <BoardContainer className=\"board\">\r\n      <BoardButtonsContainer>\r\n        <BoardButtons\r\n          addCard={addCard}\r\n          isSaved={isSaved}\r\n          saveToDatabase={saveToDatabase}\r\n        />\r\n      </BoardButtonsContainer>\r\n\r\n      <DragDropContext onDragEnd={onDragEnd}>\r\n        <Droppable type=\"card\" droppableId=\"all-cards\" direction=\"horizontal\">\r\n          {(provided) => (\r\n            <Container {...provided.droppableProps} ref={provided.innerRef}>\r\n              {boardData.cardOrder?.map((cardId, index) => {\r\n                const card = boardData.cards.find((card) => {\r\n                  return card.id === cardId;\r\n                });\r\n                // Needs to initialize as empty to send as prop\r\n                let tasks = [];\r\n\r\n                // So the map don't run over undefined\r\n                if (boardData.tasks.length > 0) {\r\n                  tasks = card.taskIds.map((taskId) =>\r\n                    boardData.tasks.find((task) => task.id === taskId)\r\n                  );\r\n                }\r\n\r\n                return (\r\n                  <Card\r\n                    key={card.id}\r\n                    newCardTitle={newCardTitle}\r\n                    card={card}\r\n                    tasks={tasks}\r\n                    index={index}\r\n                    addTask={() => addTask(card)}\r\n                    isNewCard={card.isNewCard}\r\n                    isInsertingTask={card.isInsertingTask}\r\n                    handleTaskChange={handleTaskChange}\r\n                    handleTaskSubmit={handleTaskSubmit}\r\n                    newTaskContent={newTaskContent}\r\n                    handleCardTitleChange={handleCardTitleChange}\r\n                    handleCardTitleSubmit={handleCardTitleSubmit}\r\n                    removeTask={removeTask}\r\n                    removeCard={removeCard}\r\n                  />\r\n                );\r\n              })}\r\n              {provided.placeholder}\r\n            </Container>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n    </BoardContainer>\r\n  );\r\n};\r\n\r\nexport default Board;\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport HomeIcon from \"@material-ui/icons/Home\";\r\nimport DashboardIcon from \"@material-ui/icons/Dashboard\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\nimport ReceiptIcon from \"@material-ui/icons/Receipt\";\r\nimport BugReportIcon from \"@material-ui/icons/BugReport\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  overflow: hidden;\r\n`;\r\n\r\nfunction Nav() {\r\n  return (\r\n    <>\r\n      <List component={Container}>\r\n        <ListItemLink\r\n          to=\"/app\"\r\n          primary=\"Home\"\r\n          icon={<HomeIcon color=\"primary\" />}\r\n        />\r\n        <ListItemLink\r\n          to=\"/app/board\"\r\n          primary=\"Cuadro de Notas\"\r\n          icon={<DashboardIcon color=\"primary\" />}\r\n        />\r\n        <ListItemLink\r\n          to=\"/app/pdf\"\r\n          primary=\"Facturas\"\r\n          icon={<ReceiptIcon color=\"primary\" />}\r\n        />\r\n        <ListItemLink\r\n          to=\"/app/customer\"\r\n          primary=\"Clientes\"\r\n          icon={<PersonIcon color=\"primary\" />}\r\n        />\r\n        <ListItemLink\r\n          to=\"/app/bugtracker\"\r\n          primary=\"Bug Tracker\"\r\n          icon={<BugReportIcon color=\"error\" />}\r\n        />\r\n        <ListItemLink\r\n          to=\"/app/ajustes\"\r\n          primary=\"Ajustes\"\r\n          icon={<SettingsIcon color=\"primary\" />}\r\n        />\r\n      </List>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction ListItemLink(props) {\r\n  const { icon, primary, to } = props;\r\n\r\n  const renderLink = React.useMemo(\r\n    () =>\r\n      React.forwardRef((itemProps, ref) => (\r\n        <NavLink activeClassName=\"active-nav-link\" to={to} {...itemProps} />\r\n      )),\r\n    [to]\r\n  );\r\n\r\n  return (\r\n    <li>\r\n      <ListItem button component={renderLink}>\r\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\r\n        <ListItemText primary={primary} />\r\n      </ListItem>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Nav;\r\n","const handleFileDownload = (responseObject, filename) => {\r\n    const url = window.URL.createObjectURL(new Blob([responseObject.data]));\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', `${filename}.pdf`);\r\n            document.body.appendChild(link);\r\n            link.click();\r\n}\r\n\r\nexport default handleFileDownload;","import axios from \"axios\";\r\nimport handleFileDownload from \"../helpers/handle-file-download\";\r\n\r\nconst baseUrl = \"https://gordianknot.xyz/api\";\r\n\r\nconst getInvoices = async (token) => {\r\n  try {\r\n    const invoices = await axios.get(`${baseUrl}/pdf`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n    return invoices.data;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst getOneInvoice = async (token, id) => {\r\n  try {\r\n    const invoice = await axios.get(`${baseUrl}/pdf/${id}`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n    return invoice.data;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst saveInvoice = async (token, invoice) => {\r\n  try {\r\n    await axios.post(`${baseUrl}/pdf`, invoice, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n  } catch (err) {\r\n    console.log(\"has an error\");\r\n    console.log(err);\r\n  }\r\n};\r\nconst editInvoice = async (token, invoice) => {\r\n  try {\r\n\r\n    await axios.put(`${baseUrl}/pdf/${invoice._id}`, invoice, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst deleteInvoice = async (token, id) => {\r\n  try {\r\n    const invoice = await axios.delete(`${baseUrl}/pdf/${id}`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst saveToPdf = async (token, id) => {\r\n  try {\r\n    const pdf = await axios.get(`${baseUrl}/pdf/download/${id}`, {\r\n      headers: { Authorization: `Bearer: ${token}` },\r\n      responseType: \"blob\"\r\n    });\r\n\r\n    handleFileDownload(pdf, id);\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport default {\r\n  getInvoices,\r\n  getOneInvoice,\r\n  saveInvoice,\r\n  editInvoice,\r\n  deleteInvoice,\r\n  saveToPdf\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {useForm, Controller, useFieldArray} from \"react-hook-form\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport styled from \"styled-components\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nimport dayjs from \"dayjs\";\r\nimport utc from \"dayjs/plugin/utc\";\r\n\r\nimport DayJsUtils from \"@date-io/dayjs\";\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker\r\n} from \"@material-ui/pickers\";\r\n\r\ndayjs.extend(utc);\r\n\r\n\r\nconst FlexContainer = styled.div`\r\n  display: flex;\r\n  background-color: #eee;\r\n  margin: 10px;\r\n  flex-flow: column wrap;\r\n  & button {\r\n    align-self: center;\r\n    margin-bottom: 10px;\r\n  }\r\n`;\r\nconst Form = styled.form`\r\n  display: flex;\r\n  flex-flow: column wrap;\r\n  margin: 0px 10px;\r\n  & fieldset {\r\n    border: solid 0 black;\r\n  }\r\n  & input[type=\"text\"],\r\n  input[type=\"number\"] {\r\n    background-color: #f3f3f3;\r\n    border: none;\r\n  }\r\n`;\r\nconst Title = styled.div`\r\n  align-self: center;\r\n`;\r\nconst Header = styled.div`\r\n  display: flex;\r\n  flex-flow: column wrap;\r\n  & fieldset {\r\n    display: flex;\r\n    flex-flow: column wrap;\r\n    justify-content: space-around;\r\n  }\r\n  & div {\r\n    display: flex;\r\n    margin: 5px 10px 5px 10px;\r\n    flex-grow: 1;\r\n  }\r\n`;\r\n\r\nconst StyledButton = styled(Button)`\r\n  && {\r\n    margin: 5px 0px;\r\n  }\r\n`;\r\n\r\nconst StyledTextField = styled(TextField)`\r\n  margin: 0px 20px;\r\n  & input,\r\n  textarea,\r\n  select,\r\n  option {\r\n    padding: 20px;\r\n    background-color: #f3f3f3;\r\n  }\r\n`;\r\n\r\nconst StyledDate = styled(KeyboardDatePicker)`\r\n  & input {\r\n    padding: 20px;\r\n  }\r\n`;\r\nconst InvoiceForm = ({\r\n  onSubmit,\r\n  isEditing,\r\n  invoice,\r\n  closeModal\r\n}) => {\r\n  const [selectedDate, setSelectedDate] = useState(null);\r\nconst {control, handleSubmit, reset, setValue} = useForm({defaultValues:{}});\r\nconst {fields, append, remove, replace} = useFieldArray({control, name: 'articles'})\r\nuseEffect(()=>{\r\n  if(isEditing){\r\n    reset({\r\n      clientName: invoice.clientName,\r\n      invoiceNumber: invoice.invoiceNumber,\r\n      invoiceDate: invoice.invoiceDate,\r\n      orderNumber: invoice.orderNumber || \"\",\r\n      invoiceTotal: invoice.invoiceTotal,\r\n      invoiceSubTotal: invoice.invoiceSubTotal,\r\n      invoiceTax: invoice.invoiceTax,\r\n      _id: invoice._id,\r\n      projectId: invoice.projectId,\r\n      __v: invoice.__v\r\n    }, {keepDefaultValues: true})\r\n    replace(invoice.articles)\r\n  }\r\n  setSelectedDate(invoice.invoiceDate);\r\n},[])\r\n\r\n  const handleDateChange = (date) => {\r\n    if (dayjs(date).isValid()) {\r\n      const UTCdate = dayjs(date).utc(true).format();\r\n      const event = {\r\n        target: {\r\n          name: \"invoiceDate\",\r\n          value: UTCdate\r\n        }\r\n      };\r\n      setSelectedDate(date);\r\n    }\r\n  };\r\n  return (\r\n    <div>\r\n      <Form onSubmit={handleSubmit(onSubmit)}>\r\n        <Title>\r\n          <h2>\r\n            Factura n# <span>{invoice.invoiceNumber}</span>\r\n          </h2>\r\n        </Title>\r\n        <hr />\r\n        <Header>\r\n          <fieldset>\r\n            <Controller \r\n            name=\"clientName\"\r\n            control={control}\r\n            rules={{required: \"Campo requerido\"}}\r\n            render={({field, fieldState: {error}})=><StyledTextField label=\"Nombre del cliente\" variant=\"outlined\"\r\n              margin=\"none\" {...field} error={!!error} helperText={error? error.message : null} ></StyledTextField>}\r\n            >\r\n            </Controller>\r\n            <Controller\r\n            name=\"invoiceNumber\"\r\n            control={control}\r\n            rules={{required: \"Campo requerido\"}}\r\n            render={({field, fieldState:{error}})=><StyledTextField label=\"Numero de la factura\" variant=\"outlined\" {...field} error={!!error} helperText={error? error.message : null}></StyledTextField>}\r\n            >\r\n            </Controller>\r\n          <Controller\r\n          name=\"orderNumber\"\r\n          control={control}\r\n          render={({field, fieldState:{error}})=><StyledTextField {...field} label=\"Número del pedido\" variant=\"outlined\" error={!!error} helperText={error ? error.message : null} ></StyledTextField>}\r\n          >\r\n\r\n          </Controller>\r\n           \r\n          </fieldset>\r\n          <hr />\r\n          <div>\r\n            <MuiPickersUtilsProvider utils={DayJsUtils}>\r\n              <StyledDate\r\n                autoOk\r\n                inputVariant=\"standard\"\r\n                variant=\"inline\"\r\n                format=\"DD/MM/YYYY\"\r\n                margin=\"normal\"\r\n                id=\"date-picker-inline\"\r\n                placeholder=\"Fecha de la Factura\"\r\n                value={selectedDate? selectedDate : dayjs.utc()}\r\n                onChange={(date) => handleDateChange(date)}\r\n                KeyboardButtonProps={{\r\n                  \"aria-label\": \"change date\"\r\n                }}\r\n                name=\"invoiceDate\"\r\n              />\r\n            </MuiPickersUtilsProvider>\r\n          </div>\r\n        </Header>\r\n\r\n        <Title>\r\n          <h2>Itens </h2>\r\n        </Title>\r\n        <hr />\r\n        <section>\r\n          {fields.map((item, index)=>\r\n          <FlexContainer key={item.id}>\r\n          <Controller\r\n            name={`articles[${index}].articleName`}\r\n            control={control}\r\n            rules={{required: \"este campo es requerido\"}}\r\n            render={({field, fieldState:{error}})=><StyledTextField helperText={error? error.message : null} error={!!error} label=\"Artículo\" variant=\"outlined\" {...field}></StyledTextField>}\r\n            ></Controller>\r\n          <Controller\r\n            name={`articles[${index}].pricePerUnit`}\r\n            control={control}\r\n            rules={{required: \"este campo es requerido\"}}\r\n            render={({field, fieldState:{error}})=><StyledTextField type=\"number\" helperText={error? error.message : null} error={!!error} label=\"Precio por unidad\" variant=\"outlined\" {...field}></StyledTextField>}\r\n            ></Controller>\r\n          <Controller\r\n            name={`articles[${index}].quantity`}\r\n            control={control}\r\n            rules={{required: \"este campo es requerido\"}}\r\n            render={({field, fieldState:{error}})=><StyledTextField type=\"number\" helperText={error? error.message : null} error={!!error} label=\"Cuantidad\" variant=\"outlined\" {...field}></StyledTextField>}\r\n            ></Controller>\r\n          <Controller\r\n            name={`articles[${index}].vat`}\r\n            control={control}\r\n            rules={{required: \"este campo es requerido\"}}\r\n            render={({field, fieldState:{error}})=><StyledTextField type=\"number\" helperText={error? error.message : null} error={!!error} label=\"IVA\" variant=\"outlined\" {...field}></StyledTextField>}\r\n            ></Controller>\r\n          <Controller\r\n            name={`articles[${index}].totalPrice`}\r\n            control={control}\r\n            rules={{required: \"este campo es requerido\"}}\r\n            render={({field, fieldState:{error}})=><StyledTextField type=\"number\" helperText={error? error.message : null} error={!!error} label=\"Precio Total\" variant=\"outlined\" {...field}></StyledTextField>}\r\n            ></Controller>\r\n           \r\n            <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={() => remove(index)}\r\n        >\r\n          Eliminar artículo\r\n        </Button>\r\n            </FlexContainer>\r\n          )}\r\n        </section>\r\n        \r\n        <Button variant=\"contained\" color=\"primary\" onClick={()=>{\r\n          console.log(\"click\");\r\n          append({articleName: \"\", pricePerUnit: 0, quantity: 0, vat: 21, totalPrice: 0})\r\n        }}>\r\n        \r\n        Añadir Artículo\r\n        </Button>\r\n\r\n        <Title>\r\n          <h2>Total</h2>\r\n        </Title>\r\n        <hr />\r\n        <Controller\r\n        name=\"invoiceTotal\"\r\n        control={control}\r\n        rules={{required: \"campo requerido\"}}\r\n        render={({field, fieldState:{error}})=><StyledTextField type=\"number\" label=\"Total Factura\" variant=\"outlined\" {...field} error={!!error} helperText={error? error.message : null}></StyledTextField>}\r\n        >\r\n        </Controller>\r\n        \r\n<Controller\r\nname=\"invoiceSubTotal\"\r\ncontrol={control}\r\nrules={{required: \"campo requerido\"}}\r\n        render={({field, fieldState:{error}})=><StyledTextField type=\"number\" label=\"Base Imponible\" variant=\"outlined\" {...field} error={!!error} helperText={error? error.message : null}></StyledTextField>}\r\n        \r\n></Controller>\r\n<Controller\r\nname=\"invoiceTax\"\r\ncontrol={control}\r\nrules={{required: \"campo requerido\"}}\r\n        render={({field, fieldState:{error}})=><StyledTextField type=\"number\" label=\"Importe del IVA\" variant=\"outlined\" {...field} error={!!error} helperText={error? error.message : null}></StyledTextField>}\r\n        \r\n></Controller>\r\n\r\n      \r\n        <hr />\r\n        <StyledButton\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          type=\"submit\"\r\n        >\r\n          Guardar Factura\r\n        </StyledButton>\r\n        <StyledButton\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={closeModal}\r\n        >\r\n          Cancelar\r\n        </StyledButton>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InvoiceForm;\r\n","import React, { useState, useMemo } from \"react\";\r\nimport { useTable, useSortBy, useFilters, usePagination } from \"react-table\";\r\nimport dayjs from \"dayjs\";\r\nimport advancedFormat from \"dayjs/plugin/advancedFormat\";\r\nimport styled from \"styled-components\";\r\n\r\nimport PictureAsPdfIcon from \"@material-ui/icons/PictureAsPdf\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport LastPage from \"@material-ui/icons/LastPage\";\r\nimport FirstPage from \"@material-ui/icons/FirstPage\";\r\nimport NavigateNext from \"@material-ui/icons/NavigateNext\";\r\nimport NavigateBefore from \"@material-ui/icons/NavigateBefore\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport ArrowDropUpIcon from \"@material-ui/icons/ArrowDropUp\";\r\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\r\n\r\ndayjs.extend(advancedFormat); // Plugin to format date\r\n\r\nconst Table = styled.table`\r\n  border-collapse: collapse;\r\n  border-radius: 1em;\r\n  overflow: hidden;\r\n  width: 100%;\r\n`;\r\n\r\nconst TableHeader = styled.thead`\r\n  background-color: #eee;\r\n  & th {\r\n    padding: 20px;\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  padding-top: 15px;\r\n  .react-td,\r\n  .save-to-pdf,\r\n  .delete {\r\n    :hover {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  td {\r\n    padding: 10px;\r\n  }\r\n  input {\r\n    margin-bottom: 20px;\r\n    padding: 10px;\r\n  }\r\n  th {\r\n    padding-left: 10px;\r\n    height: 30px;\r\n    & div {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Pagination = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst InvoiceTable = ({ data, handleClick, saveToPdf, deleteInvoice }) => {\r\n  const [filterInput, setFilterInput] = useState(\"\");\r\n  // Update the state when input changes\r\n  const handleFilterChange = (e) => {\r\n    const value = e.target.value || undefined;\r\n    setFilter(\"clientName\", value);\r\n    setFilterInput(value);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    const newDate = dayjs(date).format(\"DD-MM-YYYY\");\r\n\r\n    return date;\r\n  };\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        Header: \"Nombre\",\r\n        accessor: \"clientName\",\r\n        sortBy: \"string\"\r\n      },\r\n      {\r\n        Header: \"Fecha\",\r\n        accessor: (row) => row.invoiceDate, //\r\n        sortBy: \"datetime\",\r\n        Cell: (props) => {\r\n          return <>{formatDate(props.cell.value)}</>;\r\n        }\r\n      },\r\n      {\r\n        Header: \"Numero de Factura\",\r\n        accessor: \"invoiceNumber\"\r\n      },\r\n      {\r\n        Header: \"Total\",\r\n        accessor: \"invoiceTotal\",\r\n        sortBy: \"basic\"\r\n      },\r\n      {\r\n        Header: \"Download\",\r\n        accessor: \"_id\",\r\n        Cell: (props) => {\r\n          return (\r\n            <PictureAsPdfIcon\r\n              className=\"save-to-pdf\"\r\n              onClick={() => saveToPdf(props.cell.value)}\r\n            >\r\n              PDF\r\n            </PictureAsPdfIcon>\r\n          );\r\n        }\r\n      },\r\n      {\r\n        Header: \"Delete\",\r\n        accessor: \"\",\r\n        Cell: (props) => {\r\n          return (\r\n            <DeleteIcon\r\n              className=\"delete\"\r\n              onClick={() => deleteInvoice(props.cell.row.original._id)}\r\n            >\r\n              PDF\r\n            </DeleteIcon>\r\n          );\r\n        }\r\n      }\r\n    ],\r\n    [saveToPdf]\r\n  );\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    page,\r\n    prepareRow,\r\n    setFilter,\r\n    // Pagination helpers\r\n    canPreviousPage,\r\n    canNextPage,\r\n    pageOptions,\r\n    pageCount,\r\n    gotoPage,\r\n    nextPage,\r\n    previousPage,\r\n    setPageSize,\r\n    state: { pageIndex, pageSize }\r\n  } = useTable({ columns, data }, useFilters, useSortBy, usePagination);\r\n\r\n  return (\r\n    <Container>\r\n      <input\r\n        value={filterInput}\r\n        onChange={handleFilterChange}\r\n        placeholder={\"Buscar por nombre\"}\r\n      />\r\n      <Table {...getTableProps()}>\r\n        <TableHeader>\r\n          {headerGroups.map((headerGroup) => (\r\n            <tr {...headerGroup.getHeaderGroupProps()}>\r\n              {headerGroup.headers.map((column) => (\r\n                <th {...column.getHeaderProps(column.getSortByToggleProps())}>\r\n                  <div>\r\n                    {column.render(\"Header\")}\r\n                    <span>\r\n                      {column.isSorted ? (\r\n                        column.isSortedDesc ? (\r\n                          <ArrowDropDownIcon />\r\n                        ) : (\r\n                          <ArrowDropUpIcon />\r\n                        )\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </span>\r\n                  </div>\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </TableHeader>\r\n\r\n        <tbody className=\"rt-tbody\" {...getTableBodyProps()}>\r\n          {page.map((row) => {\r\n            prepareRow(row);\r\n            return (\r\n              <tr key={row.original._id}>\r\n                {row.cells.map((cell) => {\r\n                  if (\r\n                    cell.column.Header !== \"Download\" &&\r\n                    cell.column.Header !== \"Delete\"\r\n                  ) {\r\n                    return (\r\n                      <td\r\n                        className=\"react-td\"\r\n                        {...cell.getCellProps()}\r\n                        onMouseEnter={(e) => {\r\n                          e.target.parentNode.style.backgroundColor = \"#F1769A\";\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.target.parentNode.style.backgroundColor = \"inherit\";\r\n                        }}\r\n                        onClick={() => {\r\n                          handleClick(cell.row.original);\r\n                        }}\r\n                      >\r\n                        {cell.render(\"Cell\")}\r\n                      </td>\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\r\n                    );\r\n                  }\r\n                })}\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </Table>\r\n      <Pagination>\r\n        <button onClick={() => gotoPage(0)} disabled={!canPreviousPage}>\r\n          <FirstPage />\r\n        </button>{\" \"}\r\n        <button onClick={() => previousPage()} disabled={!canPreviousPage}>\r\n          <NavigateBefore />\r\n        </button>{\" \"}\r\n        <button onClick={() => nextPage()} disabled={!canNextPage}>\r\n          <NavigateNext />\r\n        </button>{\" \"}\r\n        <button onClick={() => gotoPage(pageCount - 1)} disabled={!canNextPage}>\r\n          <LastPage />\r\n        </button>{\" \"}\r\n        <span>\r\n          Página\r\n          <strong>\r\n            {pageIndex + 1} de {pageOptions.length}\r\n          </strong>{\" \"}\r\n        </span>\r\n        <span>\r\n          | Ir a la página:{\" \"}\r\n          <input\r\n            type=\"number\"\r\n            defaultValue={pageIndex + 1}\r\n            onChange={(e) => {\r\n              const page = e.target.value ? Number(e.target.value) - 1 : 0;\r\n              gotoPage(page);\r\n            }}\r\n            style={{ width: \"100px\" }}\r\n          />\r\n        </span>{\" \"}\r\n        <Select\r\n          value={pageSize}\r\n          onChange={(e) => {\r\n            setPageSize(Number(e.target.value));\r\n          }}\r\n        >\r\n          {[10, 20, 30, 40, 50].map((pageSize) => (\r\n            <MenuItem key={pageSize} value={pageSize}>\r\n              {pageSize}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </Pagination>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default InvoiceTable;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport services from \"../../services/invoice\";\r\nimport styled from \"styled-components\";\r\nimport InvoiceForm from \"./InvoiceForm\";\r\nimport InvoiceTable from \"./InvoiceTable\";\r\n\r\nconst modalStyle = {\r\n  backgroundColor: \"white\",\r\n  position: \"absolute\",\r\n  width: \"50%\",\r\n  height: \"70%\",\r\n  left: \"20%\",\r\n  top: \"15%\",\r\n  overflowY: \"auto\"\r\n};\r\n\r\nlet newInvoice = {\r\n  invoiceNumber: \"\",\r\n  invoiceDate: \"\",\r\n  orderNumber: \"\",\r\n  invoiceTotal: \"\",\r\n  invoiceSubTotal: \"\",\r\n  invoiceTax: \"\",\r\n  clientName: \"\",\r\n  articles: \"\"\r\n};\r\n\r\n\r\nconst Dashboard = styled.section`\r\n  padding-top: 20px;\r\n`;\r\nconst DashboardHeader = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Content = styled.section`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst InvoiceDashboard = ({ token }) => {\r\n  // Modal Inputs State\r\n  const [invoice, setInvoice] = useState(newInvoice);\r\n  const [invoiceSaved, setInvoiceSaved] = useState(false);\r\n  // Invoice List State\r\n  const [invoiceList, setInvoiceList] = useState([]);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [openModal, setOpenModal] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    async function callGetInvoices() {\r\n      const invoices = await services.getInvoices(token);\r\n      setInvoiceList(invoices);\r\n    }\r\n\r\n    callGetInvoices();\r\n  }, [invoiceSaved]);\r\n\r\n  const resetDashboardState = () => {\r\n    setOpenModal(false);\r\n    setIsEditing(false);\r\n    setInvoice(newInvoice);\r\n  };\r\n\r\n  // Save the articles list to the current invoice\r\n  const handleSubmit = async (filledInvoice, event) => {\r\n    event.preventDefault();\r\n    await services.saveInvoice(token, filledInvoice);\r\n    setInvoiceSaved(!invoiceSaved);\r\n    resetDashboardState();\r\n  };\r\n  // End of invoice Handlers\r\n\r\n  // Editing invoice\r\n  const editInvoice = (invoiceReceived) => {\r\n    setInvoice(invoiceReceived);\r\n    setIsEditing(true);\r\n    setOpenModal(true);\r\n  };\r\n\r\n  const handleEdit = async (filledInvoice, event) => {\r\n    event.preventDefault();\r\n    await services.editInvoice(token, filledInvoice);\r\n    setInvoiceSaved(!invoiceSaved);\r\n    resetDashboardState();\r\n  };\r\n\r\n  const handlePdf = async (id) => {\r\n    if (window.confirm(\"do you want to save it?\")) {\r\n      await services.saveToPdf(token, id);\r\n    } else {\r\n      console.log(\"so bad!\");\r\n    }\r\n  };\r\n\r\n  const deleteInvoice = async (id) => {\r\n    if (window.confirm(\"Do you really want to delete the file?\")) {\r\n      await services.deleteInvoice(token, id);\r\n      setInvoiceSaved(!invoiceSaved);\r\n      resetDashboardState();\r\n    } else {\r\n      console.log(\"so bad!\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dashboard>\r\n      <div>\r\n        <DashboardHeader>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => setOpenModal(true)}\r\n          >\r\n            Nueva Factura\r\n          </Button>\r\n        </DashboardHeader>\r\n        <Content>\r\n          {invoiceList ? (\r\n            <InvoiceTable\r\n              data={invoiceList}\r\n              handleClick={editInvoice}\r\n              saveToPdf={handlePdf}\r\n              deleteInvoice={deleteInvoice}\r\n            />\r\n          ) : null}\r\n        </Content>\r\n        <Modal open={openModal} onClose={() => resetDashboardState()}>\r\n          <div style={modalStyle}>\r\n            <InvoiceForm\r\n              onSubmit={isEditing ? handleEdit : handleSubmit}\r\n              isEditing={isEditing}\r\n              invoice={invoice}\r\n              closeModal={() => resetDashboardState()}\r\n            />\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    </Dashboard>\r\n  );\r\n};\r\n\r\nexport default InvoiceDashboard;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"https://gordianknot.xyz/api\";\r\n\r\nconst getCustomers = async (token) => {\r\n  try {\r\n    const customers = await axios.get(`${baseUrl}/customer`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n\r\n    return customers.data;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst saveCustomer = async (token, customer) => {\r\n  try {\r\n    const response = await axios.post(`${baseUrl}/customer`, customer, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n    return response.data;\r\n  } catch (err) {\r\n    console.log(\"Error sending data\");\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst editCustomer = async (token, customer) => {\r\n  try {\r\n    const edited = await axios.put(\r\n      `${baseUrl}/customer/${customer._id}`,\r\n      customer,\r\n      {\r\n        headers: { Authorization: `Bearer: ${token}` }\r\n      }\r\n    );\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst deleteCustomer = async (token, id) => {\r\n  try {\r\n    const customer = await axios.delete(`${baseUrl}/customer/${id}`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport default {\r\n  getCustomers,\r\n  saveCustomer,\r\n  editCustomer,\r\n  deleteCustomer\r\n};\r\n","import React, { useState, useMemo } from \"react\";\r\nimport { useTable, useSortBy, useFilters, usePagination } from \"react-table\";\r\nimport dayjs from \"dayjs\";\r\nimport advancedFormat from \"dayjs/plugin/advancedFormat\";\r\nimport styled from \"styled-components\";\r\n\r\nimport PictureAsPdfIcon from \"@material-ui/icons/PictureAsPdf\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport LastPage from \"@material-ui/icons/LastPage\";\r\nimport FirstPage from \"@material-ui/icons/FirstPage\";\r\nimport NavigateNext from \"@material-ui/icons/NavigateNext\";\r\nimport NavigateBefore from \"@material-ui/icons/NavigateBefore\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport ArrowDropUpIcon from \"@material-ui/icons/ArrowDropUp\";\r\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\r\n\r\ndayjs.extend(advancedFormat); // Plugin to format date\r\n\r\nconst Table = styled.table`\r\n  border-collapse: collapse;\r\n  border-radius: 1em;\r\n  overflow: hidden;\r\n  width: 100%;\r\n`;\r\n\r\nconst TableHeader = styled.thead`\r\n  background-color: #eee;\r\n  & th {\r\n    padding: 20px;\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  padding-top: 15px;\r\n  .react-td,\r\n  .save-to-pdf,\r\n  .delete {\r\n    :hover {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  td {\r\n    padding: 10px;\r\n  }\r\n  input {\r\n    margin-bottom: 20px;\r\n    padding: 10px;\r\n  }\r\n  th {\r\n    height: 30px;\r\n    & div {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Pagination = styled.div``;\r\n\r\nconst CRMTable = ({ data, handleClick, deleteCustomer }) => {\r\n  const [filterInput, setFilterInput] = useState(\"\");\r\n\r\n  // Update the state when input changes\r\n  const handleFilterChange = (e) => {\r\n    const value = e.target.value || undefined;\r\n    setFilter(\"name\", value);\r\n    setFilterInput(value);\r\n  };\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        Header: \"Nombre\",\r\n        accessor: \"name\",\r\n        sortBy: \"string\"\r\n      },\r\n\r\n      {\r\n        Header: \"Contrato\",\r\n        accessor: \"estadoContrato\"\r\n      },\r\n      {\r\n        Header: \"Modelo Contrato\",\r\n        accessor: \"modeloContrato\"\r\n      },\r\n      {\r\n        Header: \"Delete\",\r\n        accessor: \"\",\r\n        Cell: (props) => {\r\n          return (\r\n            <DeleteIcon\r\n              className=\"delete\"\r\n              onClick={() => deleteCustomer(props.cell.row.original._id)}\r\n            >\r\n              PDF\r\n            </DeleteIcon>\r\n          );\r\n        }\r\n      }\r\n    ],\r\n    []\r\n  );\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    page,\r\n    prepareRow,\r\n    setFilter,\r\n    // Pagination helpers\r\n    canPreviousPage,\r\n    canNextPage,\r\n    pageOptions,\r\n    pageCount,\r\n    gotoPage,\r\n    nextPage,\r\n    previousPage,\r\n    setPageSize,\r\n    state: { pageIndex, pageSize }\r\n  } = useTable({ columns, data }, useFilters, useSortBy, usePagination);\r\n\r\n  return (\r\n    <Container>\r\n      <input\r\n        value={filterInput}\r\n        onChange={handleFilterChange}\r\n        placeholder={\"Buscar por nome\"}\r\n      />\r\n      <Table className=\"-highlight\" {...getTableProps()}>\r\n        <TableHeader>\r\n          {headerGroups.map((headerGroup) => (\r\n            <tr {...headerGroup.getHeaderGroupProps()}>\r\n              {headerGroup.headers.map((column) => (\r\n                <th {...column.getHeaderProps(column.getSortByToggleProps())}>\r\n                  <div>\r\n                    {column.render(\"Header\")}\r\n                    <span>\r\n                      {column.isSorted ? (\r\n                        column.isSortedDesc ? (\r\n                          <ArrowDropDownIcon />\r\n                        ) : (\r\n                          <ArrowDropUpIcon />\r\n                        )\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </span>\r\n                  </div>\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </TableHeader>\r\n\r\n        <tbody className=\"rt-tbody\" {...getTableBodyProps()}>\r\n          {page.map((row) => {\r\n            prepareRow(row);\r\n            return (\r\n              <tr key={row.original._id}>\r\n                {row.cells.map((cell) => {\r\n                  if (\r\n                    cell.column.Header !== \"Download\" &&\r\n                    cell.column.Header !== \"Delete\"\r\n                  ) {\r\n                    return (\r\n                      <td\r\n                        className=\"react-td\"\r\n                        {...cell.getCellProps()}\r\n                        onMouseEnter={(e) => {\r\n                          e.target.parentNode.style.backgroundColor = \"#F1769A\";\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.target.parentNode.style.backgroundColor = \"inherit\";\r\n                        }}\r\n                        onClick={() => {\r\n                          handleClick(cell.row.original);\r\n                        }}\r\n                      >\r\n                        {cell.render(\"Cell\")}\r\n                      </td>\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\r\n                    );\r\n                  }\r\n                })}\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </Table>\r\n      <Pagination>\r\n        <button onClick={() => gotoPage(0)} disabled={!canPreviousPage}>\r\n          <FirstPage />\r\n        </button>{\" \"}\r\n        <button onClick={() => previousPage()} disabled={!canPreviousPage}>\r\n          <NavigateBefore />\r\n        </button>{\" \"}\r\n        <button onClick={() => nextPage()} disabled={!canNextPage}>\r\n          <NavigateNext />\r\n        </button>{\" \"}\r\n        <button onClick={() => gotoPage(pageCount - 1)} disabled={!canNextPage}>\r\n          <LastPage />\r\n        </button>{\" \"}\r\n        <span>\r\n          Página\r\n          <strong>\r\n            {pageIndex + 1} de {pageOptions.length}\r\n          </strong>{\" \"}\r\n        </span>\r\n        <span>\r\n          | Ir a página:{\" \"}\r\n          <input\r\n            type=\"number\"\r\n            defaultValue={pageIndex + 1}\r\n            onChange={(e) => {\r\n              const page = e.target.value ? Number(e.target.value) - 1 : 0;\r\n              gotoPage(page);\r\n            }}\r\n            style={{ width: \"100px\" }}\r\n          />\r\n        </span>{\" \"}\r\n        <Select\r\n          value={pageSize}\r\n          onChange={(e) => {\r\n            setPageSize(Number(e.target.value));\r\n          }}\r\n        >\r\n          {[10, 20, 30, 40, 50].map((pageSize) => (\r\n            <MenuItem key={pageSize} value={pageSize}>\r\n              Mostrar {pageSize}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </Pagination>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CRMTable;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport {useForm, Controller, useFieldArray} from \"react-hook-form\";\r\nimport styled from \"styled-components\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { FormControl, FormHelperText } from \"@material-ui/core\";\r\nconst FlexContainer = styled.div`\r\n  display: flex;\r\n  background-color: #eee;\r\n  margin: 10px;\r\n  flex-flow: column wrap;\r\n  & button {\r\n    align-self: center;\r\n    margin-bottom: 10px;\r\n  }\r\n`;\r\nconst Form = styled.form`\r\n  display: flex;\r\n  flex-flow: column wrap;\r\n  margin: 0px 10px;\r\n  & fieldset {\r\n    border: solid 0 black;\r\n  }\r\n  & input[type=\"text\"],\r\n  input[type=\"number\"],\r\n  select,\r\n  option {\r\n    background-color: #f3f3f3;\r\n    border: none;\r\n    margin: 10px;\r\n  }\r\n  & select,\r\n  option {\r\n    padding: 10px;\r\n  }\r\n`;\r\nconst Title = styled.div`\r\n  align-self: center;\r\n`;\r\n\r\nconst StyledButton = styled(Button)`\r\n  && {\r\n    margin: 5px 0px;\r\n  }\r\n`;\r\nconst StyledTextField = styled(TextField)`\r\n  & input,\r\n  textarea,\r\n  select,\r\n  option,\r\n  root {\r\n    padding: 20px;\r\n    background-color: #f3f3f3;\r\n  }\r\n`;\r\nconst StyledSelect = styled(Select)`\r\n  background-color: #f3f3f3;\r\n  margin: 10px;\r\n  & input {\r\n    background-color: #f3f3f3;\r\n  }\r\n`;\r\n\r\nconst CRMForm = ({\r\n  submitCRMForm,\r\nisEditing,\r\n  customer,\r\n  closeModal\r\n}) => {\r\n  const [hiddenSelect, setHiddenSelect] = useState(\"default\");\r\n  const {control, handleSubmit, reset, setValue} = useForm({defaultValues:{}});\r\n  const {fields, append, remove, replace} = useFieldArray({control, name: 'pets'})\r\n\r\n  useEffect(()=>{\r\n    if(isEditing){\r\n      reset({\r\n        name: customer.name,\r\n        modeloContrato: customer.modeloContrato,\r\n        estadoContrato: customer.estadoContrato,\r\n        _id: customer._id,\r\n        projectId: customer.projectId,\r\n        __v: customer.__v\r\n      }, {keepDefaultValues: true})\r\n      replace(customer.pets)\r\n    }\r\n\r\n  },[])\r\n\r\n  return (\r\n    <div>\r\n      <Form onSubmit={handleSubmit(submitCRMForm)}>\r\n        <Title>\r\n          <h2> Detalles del Cliente</h2>\r\n        </Title>\r\n        <hr />\r\n        <Controller\r\n        name=\"name\"\r\n        control={control}\r\n        rules={{required: \"Campo requerido\"}}\r\n        render={({field, fieldState: {error}})=><StyledTextField helperText={error? error.message : null} error={!!error} {...field} variant=\"outlined\" label=\"Nombre del Cliente\"></StyledTextField>}>\r\n        </Controller>\r\n        <Controller\r\n        name=\"modeloContrato\"\r\n        defaultValue={hiddenSelect}\r\n        control={control}\r\n        rules={{required: \"Campo requerido\",\r\n    validate: value => value !== \"default\" || \"Tienes que elegir algo\"}}\r\n    render={({field, fieldState:{error}})=><FormControl\r\n      error={!!error}>\r\n\r\n    <StyledSelect\r\n      \r\n      {...field}\r\n      variant=\"outlined\"\r\n      >\r\n      <MenuItem value={hiddenSelect} disabled>\r\n        Modelo Contrato\r\n      </MenuItem>\r\n      <MenuItem value=\"12 IVA Incluído\">12</MenuItem>\r\n      <MenuItem value=\"12 + IVA\">12 + IVA</MenuItem>\r\n      <MenuItem value=\"20 IVA incluído\">20 IVA incluido</MenuItem>\r\n    </StyledSelect>\r\n<FormHelperText>{error? error.message : null}</FormHelperText>\r\n    </FormControl>}\r\n    >\r\n        </Controller>\r\n        <Controller\r\n          name=\"estadoContrato\"\r\n        defaultValue={hiddenSelect}\r\n        control={control}\r\n        rules={{required: \"Campo requerido\",\r\n    validate: value => value !== \"default\" || \"Tienes que elegir algo\"}}\r\n    render={({field, fieldState:{error}})=><FormControl\r\n      error={!!error}>\r\n\r\n    <StyledSelect\r\n      \r\n      {...field}\r\n      variant=\"outlined\"\r\n      >\r\n       \r\n          <MenuItem value={hiddenSelect} disabled>\r\n            Estado del contrato{\" \"}\r\n          </MenuItem>\r\n          <MenuItem value=\"Firmado\">Firmado por los dos</MenuItem>\r\n          <MenuItem value=\"Firmado por Pet Sitter\">\r\n            Firmado por Pet Sitter\r\n          </MenuItem>\r\n          <MenuItem value=\"Firmado por Cliente\">Firmado por Cliente</MenuItem>\r\n          <MenuItem value=\"No firmado\">No Firmado</MenuItem>\r\n        </StyledSelect>\r\n        <FormHelperText>{error? error.message : null}</FormHelperText>\r\n    </FormControl>}\r\n    >\r\n        </Controller>\r\n        <Title>\r\n          <h2>Mascotas</h2>\r\n        </Title>\r\n        <hr />\r\n\r\n        <section>\r\n         {fields.map((item, index)=> {\r\n           return (\r\n\r\n             <FlexContainer key={item.id}>\r\n            <Controller name={`pets[${index}].petName`}\r\n            control={control}\r\n            defaultValue=\"\"\r\n            rules={{required: \"Campo requerido\"}}\r\n            render={({field, fieldState: {error}})=> <StyledTextField\r\n            {...field}\r\n            error={!!error}\r\n            helperText={error? error.message : null}\r\n            variant=\"outlined\"\r\n            size=\"medium\"\r\n            margin=\"dense\"\r\n            label=\"Nombre de la Mascota\"\r\n            ></StyledTextField>\r\n          }></Controller>\r\n \r\n  <Controller \r\n  name={`pets[${index}].petType`}\r\n  control={control}\r\n  defaultValue=\"\"\r\n  rules={{required: \"Campo requerido\"}}\r\n  render={({field, fieldState: {error}})=> \r\n  <StyledTextField\r\n  {...field}\r\n  error={!!error}\r\n  helperText={error? error.message : null}\r\n        \r\n  variant=\"outlined\"\r\n           label=\"Que mascota es? (gato, perro)\"\r\n           ></StyledTextField>\r\n          }></Controller>\r\n  <Controller \r\n  name={`pets[${index}].comment`}\r\n  control={control}\r\n  defaultValue=\"\"\r\n  rules={{required: \"Campo requerido\"}}\r\n  render={({field, fieldState: {error}})=> \r\n  <StyledTextField\r\n  multiline\r\n  rows={5}\r\n  {...field}\r\n  error={!!error}\r\n  helperText={error? error.message : null}\r\n  variant=\"outlined\"\r\n  label=\"Notas sobre la mascota\"\r\n  ></StyledTextField>\r\n}></Controller>\r\n  <StyledButton\r\n          variant=\"contained\"\r\n          \r\n          onClick={() => remove(index)}\r\n          >\r\n          Eliminar Mascota\r\n        </StyledButton>\r\n           </FlexContainer>\r\n            )\r\n         })}\r\n         </section>\r\n         <StyledButton variant=\"contained\" color=\"primary\" onClick={()=>{\r\n           append({petName: \" \", petType: \" \", comment: \" \"})\r\n          }}>\r\n          Añadir Mascota\r\n        </StyledButton>\r\n        <hr />\r\n        <StyledButton\r\n        variant=\"contained\"\r\n        color=\"primary\"\r\n        type=\"submit\"\r\n        >\r\n          Guardar\r\n        </StyledButton>\r\n        <StyledButton\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={closeModal}\r\n        >\r\n          Cancelar\r\n        </StyledButton>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CRMForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport services from \"../../services/crm\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport styled from \"styled-components\";\r\n\r\nimport CRMTable from \"./CRMTable\";\r\nimport AddClient from \"./CRMForm\";\r\n\r\nconst modalStyle = {\r\n  backgroundColor: \"white\",\r\n  position: \"absolute\",\r\n  width: \"50%\",\r\n  height: \"70%\",\r\n  left: \"20%\",\r\n  top: \"15%\",\r\n  overflowY: \"auto\"\r\n};\r\n\r\nlet newCustomer = {\r\n  name: \"\",\r\n  estadoContrato: \"No Firmado\",\r\n  modeloContrato: \"12 + IVA\"\r\n};\r\n\r\nlet pet = {\r\n  petType: \"\",\r\n  petName: \"\",\r\n  petId: \"\"\r\n};\r\n\r\nconst Dashboard = styled.section`\r\n  padding-top: 20px;\r\n`;\r\nconst DashboardHeader = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Content = styled.section`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst CRMDashboard = ({ token, user }) => {\r\n  // Modal Inputs State\r\n  const [customer, setCustomer] = useState(newCustomer);\r\n  const [customerSaved, setCustomerSaved] = useState(false);\r\n  // Invoice List State\r\n  const [customerList, setCustomerList] = useState([]);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [openModal, setOpenModal] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    callGetCustomers();\r\n  }, [customerSaved]);\r\n\r\n  async function callGetCustomers() {\r\n    const customers = await services.getCustomers(token);\r\n    setCustomerList(customers);\r\n  }\r\n  const resetDashboardState = () => {\r\n    setOpenModal(false);\r\n    setIsEditing(false);\r\n    setCustomerSaved(!customerSaved);\r\n    setCustomer(newCustomer);\r\n\r\n  };\r\n\r\n\r\n  // Save the articles list to the current customer\r\n  const handleSubmit = async (customerToSave, event) => {\r\n    event.preventDefault();\r\n    await services.saveCustomer(token, customerToSave);\r\n    setCustomerSaved(!customerSaved);\r\n    resetDashboardState();\r\n  };\r\n  // End of customer Handlers\r\n\r\n  // Editing customer\r\n  const editCustomer = (customerReceived) => {\r\n    setCustomer(customerReceived);\r\n    setIsEditing(true);\r\n    setOpenModal(true);\r\n  };\r\n\r\n  const handleEdit = async (customerToSave, e) => {\r\n    e.preventDefault();\r\n    await services.editCustomer(token, customerToSave);\r\n    setCustomerSaved(!customerSaved);\r\n    resetDashboardState();\r\n  };\r\n\r\n  const handlePdf = async (id) => {\r\n    if (window.confirm(\"do you want to save it?\")) {\r\n      await services.saveToPdf(token, id);\r\n    } else {\r\n      console.log(\"so bad!\");\r\n    }\r\n  };\r\n\r\n  const deleteCustomer = async (id) => {\r\n    if (window.confirm(\"Do you really want to delete the file?\")) {\r\n      await services.deleteCustomer(token, id);\r\n      await callGetCustomers();\r\n      setCustomerSaved(!customerSaved);\r\n      resetDashboardState();\r\n    } else {\r\n      console.log(\"so bad!\");\r\n    }\r\n  };\r\n\r\n  const callTable = () => {\r\n    return (\r\n      <CRMTable\r\n        data={customerList}\r\n        handleClick={editCustomer}\r\n        saveToPdf={handlePdf}\r\n        deleteCustomer={deleteCustomer}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dashboard>\r\n      <div>\r\n        <DashboardHeader>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => setOpenModal(true)}\r\n          >\r\n            Nuevo Cliente\r\n          </Button>\r\n        </DashboardHeader>\r\n        <Content>{customerList ? callTable() : null}</Content>\r\n        <Modal open={openModal} onClose={() => resetDashboardState()}>\r\n          <div style={modalStyle}>\r\n            <AddClient\r\n              submitCRMForm={isEditing ? handleEdit : handleSubmit}\r\n              customer={customer}\r\n              isEditing={isEditing}\r\n              closeModal={() => resetDashboardState()}\r\n            />\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    </Dashboard>\r\n  );\r\n};\r\n\r\nexport default CRMDashboard;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"https://gordianknot.xyz/api\";\r\nconst path = \"bugtracker\";\r\n\r\nconst getBugs = async (token) => {\r\n  try {\r\n    const customers = await axios.get(`${baseUrl}/${path}`, {\r\n      headers: { Authorization: `Bearer: ${token}`}\r\n    });\r\n\r\n    return customers.data;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst saveBug = async (token, customer) => {\r\n  try {\r\n    const response = await axios.post(`${baseUrl}/${path}`, customer, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n    return response.data;\r\n  } catch (err) {\r\n    console.log(\"Error sending data\");\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst editBug = async (token, customer) => {\r\n  try {\r\n    const edited = await axios.put(\r\n      `${baseUrl}/${path}/${customer._id}`,\r\n      customer,\r\n      {\r\n        headers: { Authorization: `Bearer: ${token}` }\r\n      }\r\n    );\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst deleteBug = async (token, id) => {\r\n  try {\r\n    const customer = await axios.delete(`${baseUrl}/${path}/${id}`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport default {\r\n  getBugs,\r\n  saveBug,\r\n  editBug,\r\n  deleteBug\r\n};\r\n","import React, { useState, useMemo } from \"react\";\r\nimport { useTable, useSortBy, useFilters, usePagination } from \"react-table\";\r\nimport dayjs from \"dayjs\";\r\nimport advancedFormat from \"dayjs/plugin/advancedFormat\";\r\nimport styled from \"styled-components\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport LastPage from \"@material-ui/icons/LastPage\";\r\nimport FirstPage from \"@material-ui/icons/FirstPage\";\r\nimport NavigateNext from \"@material-ui/icons/NavigateNext\";\r\nimport NavigateBefore from \"@material-ui/icons/NavigateBefore\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport ArrowDropUpIcon from \"@material-ui/icons/ArrowDropUp\";\r\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\r\n\r\ndayjs.extend(advancedFormat); // Plugin to format date\r\nconst Table = styled.table`\r\n  border-collapse: collapse;\r\n  border-radius: 1em;\r\n  overflow: hidden;\r\n  width: 100%;\r\n`;\r\n\r\nconst TableHeader = styled.thead`\r\n  background-color: #eee;\r\n  & th {\r\n    padding: 20px;\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  padding-top: 15px;\r\n  .react-td,\r\n  .save-to-pdf,\r\n  .delete {\r\n    :hover {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  td {\r\n    padding: 10px;\r\n  }\r\n  input {\r\n    margin-bottom: 20px;\r\n    padding: 10px;\r\n  }\r\n  th {\r\n    padding-left: 10px;\r\n    height: 30px;\r\n    & div {\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Pagination = styled.div``;\r\n\r\nconst CRMTable = ({ data, handleClick, deleteCustomer }) => {\r\n  const [filterInput, setFilterInput] = useState(\"\");\r\n\r\n  // Update the state when input changes\r\n  const handleFilterChange = (e) => {\r\n    const value = e.target.value || undefined;\r\n    setFilter(\"name\", value);\r\n    setFilterInput(value);\r\n  };\r\n  const formatDate = (date) => {\r\n    const formatedDate = dayjs(date).format(\"DD/MM/YYYY\");\r\n\r\n    return formatedDate;\r\n  };\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        Header: \"Descripcion\",\r\n        accessor: \"descripcion\",\r\n        sortBy: \"string\"\r\n      },\r\n\r\n      {\r\n        Header: \"Estado\",\r\n        accessor: \"estadoBug\"\r\n      },\r\n      {\r\n        Header: \"Fecha report\",\r\n        accessor: (row) => formatDate(row.reportedAt), //\r\n        sortBy: \"datetime\",\r\n        Cell: (props) => {\r\n          return <>{props.cell.value}</>;\r\n        }\r\n      },\r\n      {\r\n        Header: \"Assignado a\",\r\n        accessor: \"assignadoA\"\r\n      },\r\n      {\r\n        Header: \"Severidad\",\r\n        accessor: \"severidad\"\r\n      },\r\n      {\r\n        Header: \"Delete\",\r\n        accessor: \"\",\r\n        Cell: (props) => {\r\n          return (\r\n            <DeleteIcon\r\n              className=\"delete\"\r\n              onClick={() => deleteCustomer(props.cell.row.original._id)}\r\n            >\r\n              PDF\r\n            </DeleteIcon>\r\n          );\r\n        }\r\n      }\r\n    ],\r\n    []\r\n  );\r\n\r\n  const {\r\n    getTableProps,\r\n    getTableBodyProps,\r\n    headerGroups,\r\n    page,\r\n    prepareRow,\r\n    setFilter,\r\n    // Pagination helpers\r\n    canPreviousPage,\r\n    canNextPage,\r\n    pageOptions,\r\n    pageCount,\r\n    gotoPage,\r\n    nextPage,\r\n    previousPage,\r\n    setPageSize,\r\n    state: { pageIndex, pageSize }\r\n  } = useTable({ columns, data }, useFilters, useSortBy, usePagination);\r\n\r\n  return (\r\n    <Container>\r\n      <input\r\n        value={filterInput}\r\n        onChange={handleFilterChange}\r\n        placeholder={\"Buscar por nome\"}\r\n      />\r\n      <Table className=\"-highlight\" {...getTableProps()}>\r\n        <TableHeader>\r\n          {headerGroups.map((headerGroup) => (\r\n            <tr {...headerGroup.getHeaderGroupProps()}>\r\n              {headerGroup.headers.map((column) => (\r\n                <th {...column.getHeaderProps(column.getSortByToggleProps())}>\r\n                  <div>\r\n                    {column.render(\"Header\")}\r\n                    <span>\r\n                      {column.isSorted ? (\r\n                        column.isSortedDesc ? (\r\n                          <ArrowDropDownIcon />\r\n                        ) : (\r\n                          <ArrowDropUpIcon />\r\n                        )\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </span>\r\n                  </div>\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </TableHeader>\r\n\r\n        <tbody className=\"rt-tbody\" {...getTableBodyProps()}>\r\n          {page.map((row) => {\r\n            prepareRow(row);\r\n            return (\r\n              <tr key={row.original._id}>\r\n                {row.cells.map((cell) => {\r\n                  if (\r\n                    cell.column.Header !== \"Download\" &&\r\n                    cell.column.Header !== \"Delete\"\r\n                  ) {\r\n                    return (\r\n                      <td\r\n                        className=\"react-td\"\r\n                        {...cell.getCellProps()}\r\n                        onMouseEnter={(e) => {\r\n                          e.target.parentNode.style.backgroundColor = \"#F1769A\";\r\n                        }}\r\n                        onMouseLeave={(e) => {\r\n                          e.target.parentNode.style.backgroundColor = \"inherit\";\r\n                        }}\r\n                        onClick={() => {\r\n                          handleClick(cell.row.original);\r\n                        }}\r\n                      >\r\n                        {cell.render(\"Cell\")}\r\n                      </td>\r\n                    );\r\n                  } else {\r\n                    return (\r\n                      <td {...cell.getCellProps()}>{cell.render(\"Cell\")}</td>\r\n                    );\r\n                  }\r\n                })}\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </Table>\r\n      <Pagination>\r\n        <button onClick={() => gotoPage(0)} disabled={!canPreviousPage}>\r\n          <FirstPage />\r\n        </button>{\" \"}\r\n        <button onClick={() => previousPage()} disabled={!canPreviousPage}>\r\n          <NavigateBefore />\r\n        </button>{\" \"}\r\n        <button onClick={() => nextPage()} disabled={!canNextPage}>\r\n          <NavigateNext />\r\n        </button>{\" \"}\r\n        <button onClick={() => gotoPage(pageCount - 1)} disabled={!canNextPage}>\r\n          <LastPage />\r\n        </button>{\" \"}\r\n        <span>\r\n          Página\r\n          <strong>\r\n            {pageIndex + 1} de {pageOptions.length}\r\n          </strong>{\" \"}\r\n        </span>\r\n        <span>\r\n          | Ir a página:{\" \"}\r\n          <input\r\n            type=\"number\"\r\n            defaultValue={pageIndex + 1}\r\n            onChange={(e) => {\r\n              const page = e.target.value ? Number(e.target.value) - 1 : 0;\r\n              gotoPage(page);\r\n            }}\r\n            style={{ width: \"100px\" }}\r\n          />\r\n        </span>{\" \"}\r\n        <Select\r\n          value={pageSize}\r\n          onChange={(e) => {\r\n            setPageSize(Number(e.target.value));\r\n          }}\r\n        >\r\n          {[10, 20, 30, 40, 50].map((pageSize) => (\r\n            <MenuItem key={pageSize} value={pageSize}>\r\n              Mostrar {pageSize}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </Pagination>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CRMTable;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport styled from \"styled-components\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport {FormControl, FormHelperText} from \"@material-ui/core\";\r\nimport {useForm, Controller, useFieldArray} from \"react-hook-form\";\r\nconst FlexContainer = styled.div`\r\n  display: flex;\r\n  background-color: #eee;\r\n  margin: 10px;\r\n  flex-flow: column wrap;\r\n  & button {\r\n    align-self: center;\r\n    margin-bottom: 10px;\r\n  }\r\n`;\r\nconst Form = styled.form`\r\n  display: flex;\r\n  flex-flow: column wrap;\r\n  margin: 0px 10px;\r\n  & fieldset {\r\n    border: solid 0 black;\r\n  }\r\n  & input[type=\"text\"],\r\n  input[type=\"number\"],\r\n  select,\r\n  option {\r\n    background-color: #f3f3f3;\r\n    border: none;\r\n    margin: 10px;\r\n  }\r\n  & select,\r\n  option {\r\n    padding: 10px;\r\n  }\r\n`;\r\nconst StyledTextField = styled(TextField)`\r\n  & input,\r\n  textarea,\r\n  select,\r\n  option,\r\n  root {\r\n    padding: 20px;\r\n    background-color: #f3f3f3;\r\n  }\r\n`;\r\nconst StyledSelect = styled(Select)`\r\n  background-color: #f3f3f3;\r\n  margin: 10px;\r\n  & input {\r\n    background-color: #f3f3f3;\r\n  }\r\n`;\r\nconst StyledButton = styled(Button)`\r\n  && {\r\n    margin: 5px 0px;\r\n  }\r\n`;\r\nconst Title = styled.div`\r\n  align-self: center;\r\n`;\r\nconst ModalForm = ({\r\n  isEditing,\r\n  submitBugForm,\r\n  bug,\r\n  closeModal\r\n}) => {\r\n  const [hiddenSelect, setHiddenSelect] = useState(\"default\");\r\n  const {control, handleSubmit, reset} = useForm({defaultValues:{} })\r\n  const {fields, append, remove, replace} = useFieldArray({control, name: \"comments\"});\r\n \r\n  useEffect(()=>{\r\n    if(isEditing){\r\n      reset({\r\n        descripcion: bug.descripcion,\r\n        estadoBug: bug.estadoBug,\r\n        severidad: bug.severidad,\r\n        _id: bug._id,\r\n        projectId: bug.projectId,\r\n        __v: bug.__v\r\n      }, {keepDefaultValues: true})\r\n      replace(bug.comments)\r\n    }\r\n\r\n  },[])\r\n  return (\r\n    <div>\r\n      <Form onSubmit={handleSubmit(submitBugForm)}>\r\n        <Title>\r\n          <h2> Reportar Bug </h2>\r\n        </Title>\r\n        <hr />\r\n        <Controller\r\n        name=\"descripcion\"\r\n        control={control}\r\n        rules={{required: \"Campo requerido\"}}\r\n        render={({field, fieldState:{error}})=><StyledTextField {...field} error={!!error} helperText={error? error.message : null} label=\"Descripción del Bug\"\r\n        variant=\"outlined\"\r\n        ></StyledTextField>}\r\n        >\r\n          \r\n        </Controller>\r\n       \r\n       <Controller\r\n       name=\"estadoBug\"\r\n       control={control}\r\n       defaultValue={hiddenSelect}\r\n       rules={{required: \"Campo requerido\",\r\n    validate: value => value !== \"default\" || \"Tienes que elegir algo\"}}\r\n       render={({field, fieldState:{error}})=><FormControl  error={!!error} ><StyledSelect variant=\"outlined\" {...field} >\r\n<MenuItem value={hiddenSelect} disabled>\r\n            Estado del Bug\r\n          </MenuItem>\r\n          <MenuItem value=\"Abierto\">Abierto</MenuItem>\r\n          <MenuItem value=\"En progresso\">En progresso</MenuItem>\r\n          <MenuItem value=\"Realizando Pruebas\">Realizando Pruebas</MenuItem>\r\n          <MenuItem value=\"OK\">OK</MenuItem>\r\n       </StyledSelect>\r\n       <FormHelperText>{error? error.message : null}</FormHelperText>\r\n       </FormControl>}\r\n       >\r\n       </Controller>\r\n\r\n      <Controller\r\n      name=\"severidad\"\r\n      control={control}\r\n      defaultValue={hiddenSelect}\r\n      rules={{required: \"Campo requerido\",\r\n    validate: value => value !== \"default\" || \"Tienes que elegir algo\"}}\r\n      render={({field, fieldState:{error}})=><FormControl  error={!!error} ><StyledSelect {...field} variant=\"outlined\" helperText={error? error.message : null}>\r\n <MenuItem value={hiddenSelect} disabled>\r\n            Severidad del Bug\r\n          </MenuItem>\r\n          <MenuItem value=\"Poca\">Poca</MenuItem>\r\n          <MenuItem value=\"Cuando Puedas\">Cuando Puedas</MenuItem>\r\n          <MenuItem value=\"Importante\">Importante</MenuItem>\r\n          <MenuItem value=\"Urgente\">Urgente</MenuItem>\r\n      </StyledSelect>\r\n      <FormHelperText>{error? error.message: null}</FormHelperText>\r\n      </FormControl>  \r\n    }\r\n      \r\n      >\r\n\r\n      </Controller>\r\n     \r\n        <hr />\r\n        <Title>\r\n          <h2>Comentarios</h2>\r\n        </Title>\r\n        <hr />\r\n        <section>\r\n\r\n{fields.map((item, index)=>{\r\n  return (\r\n    <FlexContainer key={item.id}>\r\n      <Controller\r\n      name={`comments[${index}].contenido`}\r\n      control={control}\r\n      rules={{required: \"Campo requerido\"}}\r\n      render={({field, fieldState:{error}})=><StyledTextField error={!!error} helperText={error? error.message : null} {...field} multiline variant=\"outlined\" rows={5}></StyledTextField>}\r\n      >\r\n</Controller>\r\n<StyledButton variant=\"contained\" onClick={()=>remove(index)}>Eliminar</StyledButton>\r\n    </FlexContainer>\r\n  )\r\n})}\r\n          \r\n        </section>\r\n        <StyledButton variant=\"contained\" color=\"primary\" onClick={()=>append({contenido: \"\"})}>\r\n          Añadir Comentario\r\n        </StyledButton>\r\n        <StyledButton\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n         type=\"submit\"\r\n        >\r\n          Guardar\r\n        </StyledButton>\r\n        <StyledButton\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={closeModal}\r\n        >\r\n          Cancelar\r\n        </StyledButton>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport services from \"../../services/bugtracker\";\r\nimport styled from \"styled-components\";\r\n\r\n// Components\r\nimport BugtrackerTable from \"./BugtrackerTable\";\r\nimport BugtrackerForm from \"./BugtrackerForm\";\r\n\r\nconst modalStyle = {\r\n  backgroundColor: \"white\",\r\n  position: \"absolute\",\r\n  width: \"50%\",\r\n  height: \"70%\",\r\n  left: \"20%\",\r\n  top: \"15%\",\r\n  overflowY: \"auto\"\r\n};\r\n\r\nlet newBug = {\r\n  descripcion: \"\",\r\n  estadoBug: \"Abierto\",\r\n  severidad: \"Poca\"\r\n};\r\n\r\nlet comment = {\r\n  contenido: \"\",\r\n  commentId: \"\"\r\n};\r\n\r\nconst Dashboard = styled.section`\r\n  padding-top: 20px;\r\n`;\r\nconst DashboardHeader = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Content = styled.section`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst BugTrackerDashboard = ({ token }) => {\r\n  // Modal Inputs State\r\n  const [bug, setBug] = useState(newBug);\r\n  const [customerSaved, setCustomerSaved] = useState(false);\r\n  // Invoice List State\r\n  const [bugList, setBugList] = useState([]);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [openModal, setOpenModal] = useState(false);\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    callGetBugs();\r\n  }, [customerSaved]);\r\n\r\n  async function callGetBugs() {\r\n    const bugs = await services.getBugs(token);\r\n\r\n    setBugList(bugs);\r\n  }\r\n  const resetDashboardState = () => {\r\n    setOpenModal(false);\r\n    setIsEditing(false);\r\n    setCustomerSaved(!customerSaved);\r\n  };\r\n\r\n  // Save the articles list to the current customer\r\n  const handleSubmit = async (bugFormInput, event) => {\r\n    event.preventDefault();\r\n    await services.saveBug(token, bugFormInput);\r\n    setCustomerSaved(!customerSaved);\r\n    resetDashboardState();\r\n  };\r\n\r\n  // Editing customer\r\n  const editCustomer = (bugReceivedFromTable) => {\r\n    setBug(bugReceivedFromTable);\r\n    setIsEditing(true);\r\n    setOpenModal(true);\r\n  };\r\n\r\n  const handleEdit = async (bugFormInput, event) => {\r\n    event.preventDefault();\r\n    await services.editBug(token, bugFormInput);\r\n    setCustomerSaved(!customerSaved);\r\n    resetDashboardState();\r\n  };\r\n\r\n  const deleteCustomer = async (id) => {\r\n    if (window.confirm(\"Do you really want to delete the file?\")) {\r\n      await services.deleteBug(token, id);\r\n      await callGetBugs();\r\n      setCustomerSaved(!customerSaved);\r\n      resetDashboardState();\r\n    } else {\r\n      console.log(\"so bad!\");\r\n    }\r\n  };\r\n\r\n  const callTable = () => {\r\n    return (\r\n      <BugtrackerTable\r\n        data={bugList}\r\n        handleClick={editCustomer}\r\n        deleteCustomer={deleteCustomer}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Dashboard>\r\n      <div>\r\n        <DashboardHeader>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => setOpenModal(true)}\r\n          >\r\n            Nuevo Bug\r\n          </Button>\r\n        </DashboardHeader>\r\n        <Content>{bugList ? callTable() : null}</Content>\r\n        <Modal open={openModal} onClose={() => resetDashboardState()}>\r\n          <div style={modalStyle}>\r\n            <BugtrackerForm\r\n              isEditing={isEditing}\r\n              submitBugForm={isEditing ? handleEdit : handleSubmit}\r\n              bug={bug}\r\n              closeModal={() => resetDashboardState()}\r\n            />\r\n          </div>\r\n        </Modal>\r\n      </div>\r\n    </Dashboard>\r\n  );\r\n};\r\n\r\nexport default BugTrackerDashboard;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Checkbox from \"@material-ui/core/Checkbox\";\r\n\r\nconst Title = styled.div``;\r\nconst Content = styled.div`\r\n  display: flex;\r\n  flex-flow: column wrap;\r\n  align-items: center;\r\n`;\r\n\r\nconst Home = () => {\r\n  return (\r\n    <Content>\r\n      <Title>\r\n        <h2>Bienvenido a Gordian Knot</h2>\r\n      </Title>\r\n      <p>\r\n        Este es un proyecto en desarrollo. Es una webapp para gestionar pequeñas\r\n        empresas y equipos.\r\n      </p>\r\n      <p>\r\n        Esta hecho con MERN stack, en el front end utilizo Material UI como\r\n        libreria y Styled-Components para el estilo. El testing es con Jest,\r\n        utiliza Puppetter para el renderizado de pdf y react-beautiful-dnd para\r\n        la lista de tareas.\r\n      </p>\r\n      <p>\r\n        Lo creé para ayudar en la organización y gestión de la empresa que soy\r\n        co-fundador,{\" \"}\r\n        <a href=\"https://www.furmidablefamily.com\">Furmidable Family</a>.\r\n      </p>\r\n      <p>\r\n        Si quieres saber más contactame por{\" \"}\r\n        <a href=\"https://linkedin.com/in/joaoemmerich\">LinkedIn</a>\r\n      </p>\r\n      <p>João Emmerich</p>\r\n\r\n      <hr />\r\n      <Title>\r\n        <h2>Roadmap</h2>\r\n      </Title>\r\n      <List>\r\n        <ListItem>\r\n          <ListItemIcon>\r\n            <Checkbox disabled checked={true} />\r\n          </ListItemIcon>\r\n          <ListItemText>MVP</ListItemText>\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemIcon>\r\n            <Checkbox disabled  />\r\n          </ListItemIcon>\r\n          <ListItemText>User Roles</ListItemText>\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemIcon>\r\n            <Checkbox disabled />\r\n          </ListItemIcon>\r\n          <ListItemText>\r\n            Gestión de Usuarios / Añadir Colaboradores\r\n          </ListItemText>\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemIcon>\r\n            <Checkbox disabled />\r\n          </ListItemIcon>\r\n          <ListItemText>Dashboard con estadísticas</ListItemText>\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemIcon>\r\n            <Checkbox disabled />\r\n          </ListItemIcon>\r\n          <ListItemText>\r\n            Subir ficheros / Gestionar contratos de los clientes\r\n          </ListItemText>\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemIcon>\r\n            <Checkbox disabled checked={true}/>\r\n          </ListItemIcon>\r\n          <ListItemText>Validación de los formularios</ListItemText>\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemIcon>\r\n            <Checkbox disabled />\r\n          </ListItemIcon>\r\n          <ListItemText>Notificaciones con Socket.IO</ListItemText>\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemIcon>\r\n            <Checkbox disabled />\r\n          </ListItemIcon>\r\n          <ListItemText>\r\n            Establecer tema front-end / Añadir tema oscuro\r\n          </ListItemText>\r\n        </ListItem>\r\n      </List>\r\n    </Content>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import axios from \"axios\";\r\n\r\nconst baseUrl = \"https://gordianknot.xyz/api\";\r\nconst path = \"project\";\r\n\r\n\r\nconst getProjects = async (token) => {\r\n  try {\r\n    const invoices = await axios.get(`${baseUrl}/${path}`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n    return invoices.data;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst getUser = async (token) => {\r\n  try {\r\n    const invoices = await axios.get(`${baseUrl}/${path}/user`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n    return invoices.data;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst saveProject = async (token, project) => {\r\n\r\n  try {\r\n    const user = await axios.post(`${baseUrl}/${path}`, project, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n    console.log(user)\r\n    return user.data\r\n  } catch (err) {\r\n    console.log(\"has an error\");\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst editProject = async (token, project) => {\r\n  try {\r\n    await axios.put(`${baseUrl}/${path}/${project._id}`, project, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst deleteProject = async (token, id) => {\r\n  try {\r\n    const project = await axios.delete(`${baseUrl}/${path}/${id}`, {\r\n      headers: { Authorization: `Bearer: ${token}` }\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nconst saveCurrentProject = async(token, projectId) => {\r\n  try {\r\nconst currentProject = await axios.put(`${baseUrl}/user`, projectId, {\r\n  headers: {Authorization: `Bearer: ${token}`}\r\n});\r\nreturn currentProject\r\n  } catch (err) {\r\n    console.log(err)\r\n  }\r\n}\r\n\r\nexport default { getProjects, saveProject, editProject, deleteProject, getUser, saveCurrentProject };\r\n\r\n/*\r\nTo-do Dashboard\r\nValidate addtask field, warn user of imputOpen/cancel button\r\nAutofocus when adding card and tasks\r\nCreate event that points when is leaving the page without saving\r\nautosave functionality\r\nFeature: Create more projects\r\nFeature: Calendar connected with this todo list\r\nCards have the same size as the one with more content\r\nFacturas\r\nNueva factura automaticamente incrementa en 1 el número\r\nPosibilidad de añadir imagen de logo\r\nFeature: poder crear templates\r\n\r\nCRM\r\n\r\nGestionar ficheros\r\nGestionar ficheros, subir contratos\r\nCuando seleciona el cliente veo todas sus facturas\r\nAñadir \"acciones\" ej. reservas de pet sitter, compro en la tienda, contacto por facebook\r\n*/\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport {UserContext} from \"../../services/userContext\"\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport styled from \"styled-components\";\r\nimport services from \"../../services/settings\";\r\n\r\nconst StyledTextField = styled(TextField)`\r\n  & input,\r\n  textarea,\r\n  select,\r\n  option,\r\n  root {\r\n    padding: 20px;\r\n    background-color: #f3f3f3;\r\n  }\r\n`;\r\nconst Settings = ({ token, user }) => {\r\n  const [projectName, setProjectName] = useState(\"\");\r\n  const [hasSaved, setHasSaved] = useState(false)\r\n  const [workingProject, setWorkingProject] = useState();\r\n const {updateUser, updateWorkingProjectContext} = useContext(UserContext);\r\n const [hiddenSelect, setHiddenSelect] = useState(\"default\");\r\n  useEffect(() => {\r\n    async function fetchUpdatedUser() {\r\n      const projects = await services.getUser(token);\r\n      updateUser(projects);\r\n    }\r\n    fetchUpdatedUser();\r\n  }, [hasSaved]);\r\n\r\n  const saveProject =async () => {\r\n    const project = {\r\n      projectName: projectName,\r\n      projectUsers: [{ userId: user._id, role: \"admin\" }]\r\n    };\r\n   const returned = await services.saveProject(token, project);\r\n   setProjectName(\"\");\r\n   setHasSaved(!hasSaved);\r\n\r\n  };\r\n\r\n  const saveWorkingProject = async (currentProjectToSave) => {\r\n    \r\n      const project = user.projects.find(project => project.projectName === currentProjectToSave)\r\n      const newUser = await services.saveCurrentProject(token, project);\r\n  \r\n  }\r\n\r\nconst selectWorkingProject = (selectedProject) => {\r\n\r\n  if(selectedProject !== \"Cual proyecto quieres trabajar?\") {\r\n    setWorkingProject(selectedProject);\r\n   \r\n  }\r\n\r\n}\r\nconst updateWorkingProject = () => {\r\n  if(workingProject !== \"Cual proyecto quieres trabajar?\") {\r\nupdateWorkingProjectContext(workingProject);\r\nsaveWorkingProject(workingProject);\r\n  }\r\n}\r\n  return (\r\n    <div>\r\n      <p>Estos son los ajustes.</p>\r\n\r\n      <p>\r\n        Puede crear nuevo projecto y añadir compañeros con su nombre de usuario.\r\n      </p>\r\n      <p>Muestra los projectos que tiene y su rol en cada uno</p>\r\n      <p>Muestra su nombre de usuario, y su id </p>\r\n\r\n\r\n\r\n      <div>\r\n        <h2>Crear nuevo projecto</h2>\r\n        \r\n          <div>\r\n            <StyledTextField\r\n              placeholder=\"Nombre del projecto\"\r\n              variant=\"outlined\"\r\n              type=\"text\"\r\n              id=\"username\"\r\n              margin=\"dense\"\r\n              onChange={(e) => setProjectName(e.target.value)}\r\n              value={projectName}\r\n            />\r\n          </div>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => saveProject()}\r\n          >\r\n            Enviar\r\n          </Button>\r\n        \r\n      </div>\r\n\r\n      <div><h2>Elegir proyecto</h2>\r\n      <Select\r\n     defaultValue={hiddenSelect}\r\n\r\n       onChange={(e)=>selectWorkingProject(e.target.value)}\r\n       name=\"workingProject\"\r\n       variant=\"outlined\">\r\n<MenuItem value={hiddenSelect} disabled>\r\n         Cual proyecto quieres trabajar?\r\n          </MenuItem>\r\n{user && user.projects?\r\n      \r\nuser.projects.map(project => <MenuItem key={project._id} value={project.projectName}>{project.projectName}</MenuItem>) : null}\r\n      </Select>\r\n      <Button  variant=\"contained\"\r\n            color=\"primary\"\r\n            onClick={() => updateWorkingProject()}>Elegir</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Settings;","import React, { useState, useContext } from \"react\";\r\nimport { Switch, Route, useLocation } from \"react-router-dom\";\r\nimport { styles } from \"./styleApp.js\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles } from \"@material-ui/core\";\r\nimport styled from \"styled-components\";\r\nimport { UserContext } from \"./services/userContext\";\r\n// Components\r\nimport Board from \"./components/to-do/Board\";\r\nimport Nav from \"./components/Nav\";\r\nimport InvoiceDashboard from \"./components/invoice/InvoiceDashboard\";\r\nimport CRMDashboard from \"./components/crm/CRMDashboard\";\r\nimport BugTrackerDashboard from \"./components/bugtracker/BugTrackerDashboard\";\r\nimport Home from \"./components/Home\";\r\nimport Settings from \"./components/settings/Settings\";\r\n\r\nconst useStyles = makeStyles(styles);\r\n\r\n//This component is to fix the App bar standing over the other components.\r\nconst FixHeader = styled.div`\r\n  height: 55px;\r\n`;\r\n\r\nexport default function App({ token }) {\r\n  const classes = useStyles();\r\n\r\n  const [isOpened, setIsOpened] = useState(false);\r\n  const { user, logout, selectedProject } = useContext(UserContext);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <FixHeader>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              onClick={() => setIsOpened(!isOpened)}\r\n              className={classes.icon}\r\n            >\r\n              {isOpened ? <ChevronLeftIcon /> : <MenuIcon />}\r\n            </IconButton>\r\n            <Typography variant=\"h6\">Gordian Knot</Typography>\r\n            <Typography variant=\"h6\" style={{ marginLeft: \"auto\" }}> {selectedProject && selectedProject.projectName !== \"\" ? \r\n            <p>Estas trabajando en: <span style={{color: \"white\"}}> {selectedProject.projectName} </span></p> : (<Button href=\"http://localhost:3000/app/ajustes\" variant=\"contained\"\r\n            color=\"secondary\">Elegir Proyecto</Button>)} </Typography>\r\n            \r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              onClick={() => logout()}\r\n              style={{ marginLeft: \"auto\" }}\r\n            >\r\n              Logout{\" \"}\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </FixHeader>\r\n\r\n      <div className={classes.container}>\r\n        {/* Drawer is like NavBar */}\r\n        <Drawer\r\n          variant=\"permanent\"\r\n          classes={{\r\n            paper: clsx(classes.drawer, {\r\n              [classes.closed]: !isOpened,\r\n              [classes.opened]: isOpened\r\n            })\r\n          }}\r\n        >\r\n          <Nav />\r\n        </Drawer>\r\n        <main className={classes.main}>\r\n          <Switch>\r\n            <Route path=\"/app/board\">\r\n              <Board token={token} user={user} selectedProject={selectedProject} />\r\n            </Route>\r\n            <Route path=\"/app/bugtracker\">\r\n              <BugTrackerDashboard token={token} user={user} selectedProject={selectedProject}/>\r\n            </Route>\r\n            <Route path=\"/app/customer\">\r\n              <CRMDashboard token={token} user={user} selectedProject={selectedProject} />\r\n            </Route>\r\n            <Route path=\"/app/pdf\">\r\n              <InvoiceDashboard token={token} user={user} selectedProject={selectedProject}/>\r\n            </Route>\r\n            <Route path=\"/app/ajustes\">\r\n              <Settings token={token} user={user} selectedProject={selectedProject} />\r\n            </Route>\r\n            <Route path=\"/app\" token={token} user={user} selectedProject={selectedProject} exact>\r\n              <Home />\r\n            </Route>\r\n          </Switch>\r\n        </main>\r\n      </div>\r\n\r\n      <footer className={classes.footer}>\r\n        <Typography variant=\"h6\"></Typography>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n","export const styles = () => ({\r\n  root: {\r\n    textAlign: \"center\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    minHeight: \"100vh\",\r\n    color: \"#000133\"\r\n  },\r\n  appBar: {\r\n    background: \"#00022E\",\r\n    color: \"#FC86AA\"\r\n  },\r\n  icon: {\r\n    padding: \"10px\"\r\n  },\r\n  title: {\r\n    margin: \"auto\"\r\n  },\r\n  container: {\r\n    display: \"flex\",\r\n    flex: 1\r\n  },\r\n  drawer: {\r\n    position: \"static\",\r\n    transition: \"width .7s\"\r\n  },\r\n  closed: {\r\n    width: \"53px\"\r\n  },\r\n  opened: {\r\n    width: \"240px\"\r\n  },\r\n  main: {\r\n    flex: 1,\r\n    background: \"#f7f5f5\",\r\n    color: \"black\"\r\n  },\r\n  footer: {\r\n    background: \"#00022E\",\r\n    height: \"50px\",\r\n    color: \"#FC86AA\"\r\n  }\r\n});\r\n","import React from \"react\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"img-container\">\r\n        <img\r\n          src={window.location.origin + \"/todo.png\"}\r\n          alt=\"todo Logo\"\r\n        ></img>\r\n      </div>\r\n      <div className=\"header-container\">\r\n        <ul className=\"header-list\">\r\n          {/* <li>Fastenrath 64 1-2</li> */}\r\n          <li>08035 Barcelona</li>\r\n          <li>España</li>\r\n          {/* <li>CIF/NIF: Y5473135T</li> */}\r\n          {/* <li>+34 692 264 697</li> */}\r\n          {/* <li>admin@furmidablefamily.com</li> */}\r\n        </ul>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\n\r\nconst CustDetails = ({ invoice }) => {\r\n  const {\r\n    invoiceNumber,\r\n    invoiceDate,\r\n    invoiceTotal,\r\n    orderNumber,\r\n    clientName\r\n  } = invoice;\r\n  return (\r\n    <section className=\"cust-details-container\">\r\n      <div className=\"cust-details\">\r\n        <h2>Factura en nombre de: </h2>\r\n        <ul className=\"cust-details-items\">\r\n          <li>{clientName}</li>\r\n        </ul>\r\n      </div>\r\n      <div className=\"invoice-details\">\r\n        <h2>Detalles</h2>\r\n        <div className=\"detail-lists\">\r\n          <ul>\r\n            <li>Numero de factura </li>\r\n            <li>Fecha de factura</li>\r\n            {/* <li>Numero pedido</li> */}\r\n          </ul>\r\n          <ul className=\"detail-lists-results\">\r\n            <li>{invoiceNumber} </li>\r\n            <li>{invoiceDate}</li>\r\n            {/* <li>{orderNumber}</li> */}\r\n          </ul>\r\n        </div>\r\n        <div className=\"total-container\">\r\n          <p>Total:</p>\r\n          <p>€ {invoiceTotal}</p>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default CustDetails;\r\n","import React from \"react\";\r\n\r\nconst Articles = ({ articles }) => {\r\n  return (\r\n    <div className=\"table-container\">\r\n      <table className=\"articles-table pdf-table\">\r\n        <thead className=\"pdf-thead\">\r\n          <tr>\r\n            <td className=\"pdf-td\" colSpan=\"2\">\r\n              Articulo\r\n            </td>\r\n            <td className=\"td-centered pdf-td\">\r\n              Precio Unidad <br></br>\r\n              <span className=\"iva-detail\">IVA INCL</span>\r\n            </td>\r\n            <td className=\"pdf-td\">Unidades</td>\r\n            <td className=\"td-centered pdf-td\">\r\n              Precio total <br></br>\r\n              <span className=\"iva-detail\">IVA INCL</span>\r\n            </td>\r\n            <td className=\"pdf-td\">Tasa IVA</td>\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"pdf-tbody\">\r\n          {articles.map((article) => {\r\n            return (\r\n              <tr key={article.articleId}>\r\n                <td className=\"pdf-td\" colSpan=\"2\">\r\n                  {article.articleName}\r\n                </td>\r\n                <td className=\"td-centered pdf-td\">€ {article.pricePerUnit}</td>\r\n                <td className=\"td-centered pdf-td\">{article.quantity}</td>\r\n                <td className=\"td-centered pdf-td\">€ {article.totalPrice}</td>\r\n                <td className=\"td-centered pdf-td\">% {article.vat}</td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Articles;\r\n","import React from \"react\";\r\n\r\nconst Total = ({ invoice }) => {\r\n  const { invoiceTotal, invoiceSubTotal, invoiceTax } = invoice;\r\n\r\n  return (\r\n    <div className=\"desglose-container\">\r\n      <div className=\"total-container\">\r\n        <p>Total: </p>\r\n        <p>€{invoiceTotal}</p>\r\n      </div>\r\n      <div className=\"desglose-p\">\r\n        {\" \"}\r\n        <p>Desglose del IVA: </p>\r\n      </div>\r\n      <div className=\"desglose\">\r\n        <p>€{invoiceSubTotal}</p>\r\n        <p>más iva de 21%</p>\r\n        <p>€{invoiceTax}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Total;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport Header from \"./Header\";\r\nimport CustDetails from \"./CustDetails\";\r\nimport Articles from \"./Articles\";\r\nimport Total from \"./Total\";\r\nimport constants from \"../../../constants/index\";\r\nimport \"./DocumentPDF.css\";\r\nconst baseUrl = \"https://gordianknot.xyz/api\";\r\n\r\n\r\nconst DocumentPDF = ({ match }) => {\r\n  const [invoice, setInvoice] = useState(null);\r\n\r\n  useEffect(\r\n    \r\n    () => {\r\n      const token = localStorage.getItem(constants.ACCESS_TOKEN);\r\n      if(token){\r\n\r\n        axios.get(`${baseUrl}/pdf/${match.params.id}`, {\r\n          headers: { Authorization: `Bearer: ${token}` }}).then((response) => {\r\n            setInvoice(response.data);\r\n          });\r\n        }\r\n    },\r\n    [match.params]\r\n  );\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"document\">\r\n        <section className=\"page\">\r\n          <div className=\"pdf-content\">\r\n            <Header />\r\n            <hr></hr>\r\n            {invoice !== null ? (\r\n              <>\r\n                <CustDetails invoice={invoice} client={invoice.client} />\r\n                <Articles articles={invoice.articles} />\r\n                <hr></hr>\r\n                <Total invoice={invoice} />\r\n              </>\r\n            ) : null}\r\n          </div>\r\n        </section>\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\nexport default DocumentPDF;\r\n","import React, { useState } from \"react\";\r\nimport { Router, Route, Switch } from \"react-router-dom\";\r\nimport history from \"./helpers/history\";\r\nimport constants from \"./constants/index\";\r\n\r\nimport PrivateRoute from \"./components/PrivateRoute\";\r\nimport LoginForm from \"./components/LoginForm\";\r\nimport App from \"./App\";\r\nimport DocumentPDF from \"./components/invoice/pdf-page/DocumentPDF\";\r\nimport { UserProvider } from \"./services/userContext\";\r\nconst Login = () => {\r\n  const [user, setUser] = useState();\r\n\r\n  // const submitUser = (response) => {\r\n  //   localStorage.setItem(constants.ACCESS_TOKEN, response.token);\r\n  //   setUser(response.user);\r\n  //   history.push({ pathname: \"/app\", state: response.user });\r\n  // };\r\n\r\n  return (\r\n    <div>\r\n        <UserProvider>\r\n      <Router history={history}>\r\n        <Switch>\r\n          <PrivateRoute component={App} path=\"/app\" user={user} />\r\n          <PrivateRoute component={DocumentPDF} path=\"/topdf/:id\" user={user} />\r\n          <Route path=\"/\">\r\n            <LoginForm />\r\n          </Route>\r\n        </Switch>\r\n      </Router>\r\n          </UserProvider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { StrictMode } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Login from \"./Login\";\r\n\r\n\r\nimport \"typeface-roboto\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <StrictMode>\r\n   \r\n      <Login />\r\n   \r\n  </StrictMode>,\r\n  rootElement\r\n);\r\n"],"sourceRoot":""}